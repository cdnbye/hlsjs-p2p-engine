window.hlsSourceHandler=function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){"use strict";var r=n(1);window.videojs&&(r.registerConfigPlugin(window.videojs),r.registerSourceHandler(window.videojs)),e.exports={register:r.registerSourceHandler}},function(e,t,n){"use strict";var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=window.Hls;function r(e){var t=this;e&&(t.srOptions_||(t.srOptions_={}),t.srOptions_.hlsjsConfig||(t.srOptions_.hlsjsConfig=e.hlsjsConfig),t.srOptions_.captionConfig||(t.srOptions_.captionConfig=e.captionConfig))}e.exports={registerSourceHandler:function(C){var e,D={};function n(n,i){i.name_="StreamrootHlsjs";var a,l=i.el(),r={},o=null,u=null,s=null,d=null,c=null,v=null,g=C(i.options_.playerId),f=g.qualityLevels&&g.qualityLevels();f&&g.hlsQualitySelector&&(i.hls={});var p=!1;function h(e){1===r[x.ErrorTypes.MEDIA_ERROR]?a.recoverMediaError():2===r[x.ErrorTypes.MEDIA_ERROR]?(a.swapAudioCodec(),a.recoverMediaError()):2<r[x.ErrorTypes.MEDIA_ERROR]&&(i.error=function(){return e},i.trigger("error"))}function y(e){a.nextLevel=e}function b(e,t){return!!f&&("boolean"==typeof t&&(f[e]._enabled=t,function(){for(var e=!0,t=0;t<f.length;t++)if(!f[t]._enabled){e=!1;break}if(e)a.currentLevel=-1;else{for(var n=f.length-1;0<=n&&!f[n]._enabled;n--);a.currentLevel=n}}()),f[e]._enabled)}function E(e,t){f&&(f.selectedIndex_=t.level,f.trigger({selectedIndex:t.level,type:"change"}))}function m(){var o,e,t;u&&(o=[],1<u.levels.length&&(e={id:-1,label:"auto",selected:-1===a.manualLevel},o.push(e)),u.levels.forEach(function(e,t){var n,r={};r.id=t,r.selected=t===a.manualLevel,r.label=(n=e).height?n.height+"p":n.width?Math.round(9*n.width/16)+"p":n.bitrate?n.bitrate/1e3+"kbps":0,o.push(r)}),t={qualityData:{video:o},qualitySwitchCallback:y},i.trigger("loadedqualitydata",t),l.removeEventListener("playing",m))}function _(){for(var e=i.audioTracks(),t=0;t<e.length;t++)if(e[t].enabled){a.audioTrack=t;break}}function k(){var e=a.audioTracks,t=i.audioTracks();if(1<e.length&&0===t.length){for(var n=0;n<e.length;n++)t.addTrack(new C.AudioTrack({id:n,kind:"alternative",label:e[n].name||e[n].lang,language:e[n].lang,enabled:n===a.audioTrack}));t.addEventListener("change",_)}}function T(e){return e.label?e.label:e.language}function R(e,t){return T(e)===T(t)&&e.kind===t.kind}function O(){for(var e=g.textTracks(),t=null,n=0;n<e.length;n++)if("showing"===e[n].mode){t=e[n];break}for(var r=l.textTracks,o=0;o<r.length;o++)"subtitles"!==r[o].kind&&"captions"!==r[o].kind||(r[o].mode=t&&R(r[o],t)?"showing":"disabled")}function S(){a.startLoad(-1),l.removeEventListener("play",S)}function L(){for(var e=function(e){for(var t=[],n=0;n<e.length;n++)"subtitles"!==e[n].kind&&"captions"!==e[n].kind||t.push(e[n]);return t}(l.textTracks),t=g.textTracks(),n=0;n<e.length;n++){for(var r,o=!1,i=0;i<t.length;i++)if(R(e[n],t[i])){o=!0;break}o||(r=e[n],g.addRemoteTextTrack({kind:r.kind,label:T(r),language:r.language,srclang:r.language},!1))}O(),p||(t.addEventListener("change",O),p=!0)}function w(e,t){u=t,function(){if(u&&(f=g.qualityLevels&&g.qualityLevels())){i.hls={};for(var e=0;e<u.levels.length;e++){var t=u.levels[e],n="hlsjs-"+e,r={id:n,label:n,width:t.width,height:t.height,bandwidth:t.bitrate,bitrate:t.bitrate,_enabled:!1};r.enabled=b.bind(this,e),f.addQualityLevel(r)}}}()}function e(){var e=g.srOptions_&&g.srOptions_.hlsjsConfig||i.options_.hlsjsConfig;v=e?function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t}(e):{},-1!==["","auto"].indexOf(l.preload)||l.autoplay||void 0!==v.autoStartLoad||(v.autoStartLoad=!1);var f,t=g.srOptions_&&g.srOptions_.captionConfig||i.options_.captionConfig;t&&(v.cueHandler=(f=t,{newCue:function(e,t,n,r){for(var o,i,a,l=window.VTTCue||window.TextTrackCue,u=0;u<r.rows.length;u++)if(a="",!(o=r.rows[u]).isEmpty()){for(var s=0;s<o.chars.length;s++)a+=o.chars[s].uchar;if(i=new l(t,n,a.trim()),null!=f&&"object"===(void 0===f?"undefined":j(f)))for(var d=Object.keys(f),c=0;c<d.length;c++)i[d[c]]=f[d[c]];e.addCue(i),n===t&&e.addCue(new l(n+5,""))}}})),!1===v.autoStartLoad&&l.addEventListener("play",S),l.addEventListener("playing",m),a=new x(v),function(e){if(void 0!==D[e])for(var t=0;t<D[e].length;t++)D[e][t](g,a)}("beforeinitialize"),a.on(x.Events.ERROR,function(e,t){!function(e){var t={message:"HLS.js error: "+e.type+" - fatal: "+e.fatal+" - "+e.details};if(r[e.type]?r[e.type]+=1:r[e.type]=1,e.fatal)switch(e.type){case x.ErrorTypes.NETWORK_ERROR:t.code=2,i.error=function(){return t},i.trigger("error");break;case x.ErrorTypes.MEDIA_ERROR:t.code=3,h(t);break;default:a.destroy(),i.error=function(){return t},i.trigger("error")}}(t)}),a.on(x.Events.AUDIO_TRACKS_UPDATED,k),a.on(x.Events.MANIFEST_PARSED,w),a.on(x.Events.LEVEL_LOADED,function(e,t){v.liveSyncDuration?c=v.liveSyncDuration:v.liveSyncDurationCount&&(c=v.liveSyncDurationCount*t.details.targetduration),s=t.details.live,d=t.details.totalduration,o=s?1/0:t.details.totalduration}),a.once(x.Events.FRAG_LOADED,function(){i.trigger("loadedmetadata")}),a.on(x.Events.LEVEL_SWITCHED,E),a.attachMedia(l),l.textTracks.addEventListener("addtrack",L),a.loadSource(n.src)}this.duration=function(){return o||l.duration||0},this.seekable=function(){if(a.media){if(!s)return C.createTimeRanges(0,a.media.duration);var e=Math.round(a.media.duration-d),t=Math.round(a.media.duration-c);return C.createTimeRanges(e,t)}return C.createTimeRanges()},this.dispose=function(){l.removeEventListener("play",S),l.textTracks.removeEventListener("addtrack",L),l.removeEventListener("playing",m),g.textTracks().removeEventListener("change",O),p=!1,g.audioTracks().removeEventListener("change",_),a.destroy()},l.addEventListener("error",function(e){var t=e.currentTarget.error;switch(t.code){case t.MEDIA_ERR_ABORTED:0;break;case t.MEDIA_ERR_DECODE:h(t);break;case t.MEDIA_ERR_NETWORK:0;break;case t.MEDIA_ERR_SRC_NOT_SUPPORTED:0;break;default:t.message}}),e()}if(n.addHook=function(e,t){D[e]=D[e]||[],D[e].push(t)},n.removeHook=function(e,t){if(void 0===D[e])return!1;var n=D[e].indexOf(t);return-1!==n&&(D[e].splice(n,1),!0)},x.isSupported()){if("function"==typeof C.getTech)e=C.getTech("Html5");else{if("function"!=typeof C.getComponent)return;e=C.getComponent("Html5")}if(!e)return;e.registerSourceHandler({canHandleSource:function(e){var t=/^application\/x-mpegURL|application\/vnd\.apple\.mpegurl$/i.test(e.type)?"probably":/\.m3u8/i.test(e.src)?"maybe":"";return t},handleSource:function(e,t){return t.hlsProvider&&t.hlsProvider.dispose(),t.hlsProvider=new n(e,t),t.hlsProvider}},0),C.Html5Hlsjs=n}},registerConfigPlugin:function(e){(e.registerPlugin||e.plugin)("streamrootHls",r)}}}]);