{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dfcb22dc8f9313fc7df0","webpack:///./node_modules/_events@1.1.1@events/events.js","webpack:///./src/cdnbye-core/index.js","webpack:///./src/bittorrent/index.js","webpack:///./node_modules/_reconnecting-websocket@3.2.2@reconnecting-websocket/dist/index.js","webpack:///./src/index.engine.js","webpack:///./src/config.js","webpack:///./src/bittorrent/bt-tracker.js","webpack:///./src/bittorrent/bt-scheduler.js","webpack:///./node_modules/_cdnbye-core@0.0.5@cdnbye-core/dist/cdnbye-core.js","webpack:///./src/signal-client.js","webpack:///./src/bittorrent/bt-loader.js","webpack:///./src/buffer-manager.js","webpack:///./node_modules/_ua-parser-js@0.7.17@ua-parser-js/src/ua-parser.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/utils/logger.js"],"names":["config","announce","neighbours","urgentOffset","Tracker","FragLoader","uaParserResult","getResult","P2PEngine","hlsjs","p2pConfig","Object","assign","p2pEnabled","disableP2P","currLoaded","currPlay","onLevelLoaded","event","data","isLive","details","live","channel","url","split","logger","_init","off","constructor","Events","LEVEL_LOADED","on","browserInfo","browser","name","device","type","os","bufMgr","fetcher","key","window","encodeURIComponent","signaler","scheduler","bufferManager","fLoader","FRAG_LOADING","id","debug","frag","sn","currentLoadingSN","signalTried","FRAG_LOADED","currentLoadedSN","currLoadedDuration","duration","bitrate","Math","round","loaded","connected","info","resumeP2P","loadByHTTP","loadByP2P","FRAG_CHANGED","currentPlaySN","ERROR","error","fatal","errDetails","ErrorDetails","FRAG_LOAD_ERROR","FRAG_LOAD_TIMEOUT","errsFragLoad","BUFFER_STALLED_ERROR","errsBufStalled","INTERNAL_EXCEPTION","errsInternalExpt","DESTROYING","destroy","warn","stopP2P","WEBRTC_SUPPORT","version","defaultP2PConfig","wsSignalerAddr","wsMaxRetries","wsReconnectInterval","dcRequestTimeout","dcUploadTimeout","dcPings","dcTolerance","packetSize","maxBufSize","loadTimeout","enableLogUpload","logUploadAddr","logUploadLevel","logLevel","BTTracker","engine","DCMap","Map","failedDCSet","Set","signalerWs","heartbeatInterval","peers","_setupScheduler","btAnnounce","then","JSON","stringify","json","peerId","peer_id","identifier","btHeartbeat","heartbeat_interval","btStatsStart","report_limit","_initSignalerWs","_handlePeers","emit","catch","clearInterval","heartbeater","peer","push","filter","keys","node","length","remotePeerId","pop","datachannel","set","_setupDC","DC_SIGNAL","sendSignal","signalTimer","has","setTimeout","delete","add","_tryConnectToPeer","once","DC_ERROR","channelId","deletePeer","_requestMorePeers","isInitiator","decreConns","increFailConns","DC_CLOSE","DC_OPEN","handshakePeer","size","increConns","websocket","onopen","onmessage","e","msg","parse","action","from_peer_id","clearTimeout","_handleSignal","onclose","get","receiveSignal","s","setInterval","peerMap","floor","btGetPeers","updatePlaySN","updateLoadingSN","updateLoadedSN","BTScheduler","bitset","bitCounts","DC_HAVE","_broadcastToPeers","loadingSN","hasPeers","requested","idx","values","downloading","requestDataBySN","idlePeers","_getIdlePeer","overflowed","sortedArr","entries","sort","item1","item2","rearest","includes","dc","forEach","_decreBitCounts","value","sendBitField","Array","from","context","callbacks","stats","trequest","performance","now","retry","tfirst","tload","criticalSeg","relurl","target","requestDataByURL","criticaltimeouter","_criticaltimeout","bind","DC_BITFIELD","field","_increBitCounts","addPeer","DC_LOST","DC_PIECE","max","DC_PIECE_NOT_FOUND","DC_RESPONSE","response","total","byteLength","onSuccess","addBuffer","DC_REQUEST","getURLbySN","hasSegOfURL","seg","getSegByURL","sendBuffer","sendJson","DC_TIMEOUT","index","last","onTimeout","bm","BM_LOST","SignalClient","_ws","wsOptions","maxRetries","minReconnectionDelay","queryStr","undefined","send","msgStr","to_peer_id","close","xhrLoader","loader","abort","reportFlow","peersHasSN","load","copyAndAddBuffer","BufferManager","_segPool","_currBufSize","sn2Url","payloadBuf","targetBuffer","copy","segment","addSeg","buf","parseInt","lastSeg","shift","clear","logTypes","none","typesP","typesU","Logger","_initWs","i","noop","_debugP","_debugU","_infoP","_infoU","_warnP","_warnU","_errorP","_errorU","console","log","_uploadLog","ws"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;ACzRA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;AChBA;;;;AACA;;;;;;AALA;;;;AAOA,IAAIA,SAAS;AACTC,cAAU,4BADD,EAC6D;AACtEC,gBAAY,EAFH,EAEyD;AAClEC,kBAAc,CAHL,CAGwD;;AAHxD,CAAb;;QAQIC,O;QACUC,U;QACVL,M,GAAAA,M;;;;;;;ACjBJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH;AACA;AACA,0BAA0B,kBAAkB,EAAE;AAC9C,+BAA+B,mBAAmB,EAAE;AACpD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oCAAoC,EAAE;AACtE,iCAAiC,mCAAmC,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,KAAK,gBAAgB;AACrB;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK,KAAK;AACV;AACA,4BAA4B,2BAA2B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C,gCAAgC,aAAa;AAC7C,mCAAmC;AACnC,gCAAgC,wIAAwI;AACxK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AClNA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;;;;;+eAVA;;;;AAYA,IAAMM,iBAAkB,0BAAD,CAAiBC,SAAjB,EAAvB;AACA;;IAEMC,S;;;;;4BAEkB;AAChB;AACH;;;4BAE2B;AACxB,mBAAOF,cAAP;AACH;;;AAED,uBAAYG,KAAZ,EAAmBC,SAAnB,EAA8B;AAAA;;AAAA;;AAI1B,cAAKV,MAAL,GAAc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EAAlC;AACH;AACJ;;;oCAEW2K,M,EAAQ;AAChB,mBAAO,KAAKoD,QAAL,CAAcrG,GAAd,CAAkBiD,MAAlB,CAAP;AACH;;;mCAEU3K,E,EAAI;AACX,mBAAO,KAAKiO,MAAL,CAAYvG,GAAZ,CAAgB1H,EAAhB,CAAP;AACH;;;gCAEO;AACJ,iBAAK+N,QAAL,CAAcY,KAAd;AACA,iBAAKV,MAAL,CAAYU,KAAZ;AACA,iBAAKX,YAAL,GAAoB,CAApB;AACH;;;4BAjEiB;AACd,mBAAO,KAAKA,YAAZ;AACH;;;;;;kBAkEUF,a;;;;;;;AC9Ff;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA,6BAA6B;AAC7B,kDAAkD;;AAElD;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA,0CAA0C;AAC1C;;AAEA;AACA;;AAEA;;AAEA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,cAAc,gBAAgB;AAC9B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,8CAA8C,EAAE;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,oDAAoD,IAAI;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+CAA+C,IAAI,kCAAkC,IAAI;AACzF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AAC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AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA4B,IAAI;AAChC;;AAEA;AACA;;AAEA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA,wDAAwD;AACxD;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa;AAAA;AACb,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;AC/iCD;AACA;;;;;;;;;;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","file":"./hlsjs-p2p-engine.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"P2PEngine\"] = factory();\n\telse\n\t\troot[\"P2PEngine\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dfcb22dc8f9313fc7df0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_events@1.1.1@events/events.js\n// module id = 0\n// module chunks = 0","/**\n * Created by xieting on 2018/4/3.\n */\n\n// import datachannel from './cdnbye-core/src/datachannel';\n// import events from './cdnbye-core/src/events';\n// import fetcher from './cdnbye-core/src/fetcher';\n// import  getBrowserRTC from 'get-browser-rtc';\n//\n// var Buffer = require('buffer/').Buffer;\n//\n// export {\n//     datachannel as DataChannel,\n//     events as Events,\n//     fetcher as Fetcher,\n//     Buffer,\n//     getBrowserRTC\n// }\n\n\nexport * from 'cdnbye-core';\n\n\n\n// WEBPACK FOOTER //\n// ./src/cdnbye-core/index.js","/**\n * Created by xieting on 2018/3/26.\n */\n\nimport Tracker from './bt-tracker';\nimport Loader from './bt-loader';\n\nlet config = {\n    announce: \"https://tracker.cdnbye.com\",                               //tracker\n    neighbours: 12,                                                   //\n    urgentOffset: 3,                                                 //bufferurgent\n\n};\n\nexport {\n    Tracker,\n    Loader as FragLoader,\n    config\n}\n\n\n// WEBPACK FOOTER //\n// ./src/bittorrent/index.js","\"use strict\";\n;\n;\n;\nvar isWebSocket = function (constructor) {\n    return constructor && constructor.CLOSING === 2;\n};\nvar isGlobalWebSocket = function () {\n    return typeof WebSocket !== 'undefined' && isWebSocket(WebSocket);\n};\nvar getDefaultOptions = function () { return ({\n    constructor: isGlobalWebSocket() ? WebSocket : null,\n    maxReconnectionDelay: 10000,\n    minReconnectionDelay: 1500,\n    reconnectionDelayGrowFactor: 1.3,\n    connectionTimeout: 4000,\n    maxRetries: Infinity,\n    debug: false,\n}); };\nvar bypassProperty = function (src, dst, name) {\n    Object.defineProperty(dst, name, {\n        get: function () { return src[name]; },\n        set: function (value) { src[name] = value; },\n        enumerable: true,\n        configurable: true,\n    });\n};\nvar initReconnectionDelay = function (config) {\n    return (config.minReconnectionDelay + Math.random() * config.minReconnectionDelay);\n};\nvar updateReconnectionDelay = function (config, previousDelay) {\n    var newDelay = previousDelay * config.reconnectionDelayGrowFactor;\n    return (newDelay > config.maxReconnectionDelay)\n        ? config.maxReconnectionDelay\n        : newDelay;\n};\nvar LEVEL_0_EVENTS = ['onopen', 'onclose', 'onmessage', 'onerror'];\nvar reassignEventListeners = function (ws, oldWs, listeners) {\n    Object.keys(listeners).forEach(function (type) {\n        listeners[type].forEach(function (_a) {\n            var listener = _a[0], options = _a[1];\n            ws.addEventListener(type, listener, options);\n        });\n    });\n    if (oldWs) {\n        LEVEL_0_EVENTS.forEach(function (name) {\n            ws[name] = oldWs[name];\n        });\n    }\n};\nvar ReconnectingWebsocket = function (url, protocols, options) {\n    var _this = this;\n    if (options === void 0) { options = {}; }\n    var ws;\n    var connectingTimeout;\n    var reconnectDelay = 0;\n    var retriesCount = 0;\n    var shouldRetry = true;\n    var savedOnClose = null;\n    var listeners = {};\n    // require new to construct\n    if (!(this instanceof ReconnectingWebsocket)) {\n        throw new TypeError(\"Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator\");\n    }\n    // Set config. Not using `Object.assign` because of IE11\n    var config = getDefaultOptions();\n    Object.keys(config)\n        .filter(function (key) { return options.hasOwnProperty(key); })\n        .forEach(function (key) { return config[key] = options[key]; });\n    if (!isWebSocket(config.constructor)) {\n        throw new TypeError('Invalid WebSocket constructor. Set `options.constructor`');\n    }\n    var log = config.debug ? function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return console.log.apply(console, ['RWS:'].concat(params));\n    } : function () { };\n    /**\n     * Not using dispatchEvent, otherwise we must use a DOM Event object\n     * Deferred because we want to handle the close event before this\n     */\n    var emitError = function (code, msg) { return setTimeout(function () {\n        var err = new Error(msg);\n        err.code = code;\n        if (Array.isArray(listeners.error)) {\n            listeners.error.forEach(function (_a) {\n                var fn = _a[0];\n                return fn(err);\n            });\n        }\n        if (ws.onerror) {\n            ws.onerror(err);\n        }\n    }, 0); };\n    var handleClose = function () {\n        log('handleClose', { shouldRetry: shouldRetry });\n        retriesCount++;\n        log('retries count:', retriesCount);\n        if (retriesCount > config.maxRetries) {\n            emitError('EHOSTDOWN', 'Too many failed connection attempts');\n            return;\n        }\n        if (!reconnectDelay) {\n            reconnectDelay = initReconnectionDelay(config);\n        }\n        else {\n            reconnectDelay = updateReconnectionDelay(config, reconnectDelay);\n        }\n        log('handleClose - reconnectDelay:', reconnectDelay);\n        if (shouldRetry) {\n            setTimeout(connect, reconnectDelay);\n        }\n    };\n    var connect = function () {\n        if (!shouldRetry) {\n            return;\n        }\n        log('connect');\n        var oldWs = ws;\n        var wsUrl = (typeof url === 'function') ? url() : url;\n        ws = new config.constructor(wsUrl, protocols);\n        connectingTimeout = setTimeout(function () {\n            log('timeout');\n            ws.close();\n            emitError('ETIMEDOUT', 'Connection timeout');\n        }, config.connectionTimeout);\n        log('bypass properties');\n        for (var key in ws) {\n            // @todo move to constant\n            if (['addEventListener', 'removeEventListener', 'close', 'send'].indexOf(key) < 0) {\n                bypassProperty(ws, _this, key);\n            }\n        }\n        ws.addEventListener('open', function () {\n            clearTimeout(connectingTimeout);\n            log('open');\n            reconnectDelay = initReconnectionDelay(config);\n            log('reconnectDelay:', reconnectDelay);\n            retriesCount = 0;\n        });\n        ws.addEventListener('close', handleClose);\n        reassignEventListeners(ws, oldWs, listeners);\n        // because when closing with fastClose=true, it is saved and set to null to avoid double calls\n        ws.onclose = ws.onclose || savedOnClose;\n        savedOnClose = null;\n    };\n    log('init');\n    connect();\n    this.close = function (code, reason, _a) {\n        if (code === void 0) { code = 1000; }\n        if (reason === void 0) { reason = ''; }\n        var _b = _a === void 0 ? {} : _a, _c = _b.keepClosed, keepClosed = _c === void 0 ? false : _c, _d = _b.fastClose, fastClose = _d === void 0 ? true : _d, _e = _b.delay, delay = _e === void 0 ? 0 : _e;\n        log('close - params:', { reason: reason, keepClosed: keepClosed, fastClose: fastClose, delay: delay, retriesCount: retriesCount, maxRetries: config.maxRetries });\n        shouldRetry = !keepClosed && retriesCount <= config.maxRetries;\n        if (delay) {\n            reconnectDelay = delay;\n        }\n        ws.close(code, reason);\n        if (fastClose) {\n            var fakeCloseEvent_1 = {\n                code: code,\n                reason: reason,\n                wasClean: true,\n            };\n            // execute close listeners soon with a fake closeEvent\n            // and remove them from the WS instance so they\n            // don't get fired on the real close.\n            handleClose();\n            ws.removeEventListener('close', handleClose);\n            // run and remove level2\n            if (Array.isArray(listeners.close)) {\n                listeners.close.forEach(function (_a) {\n                    var listener = _a[0], options = _a[1];\n                    listener(fakeCloseEvent_1);\n                    ws.removeEventListener('close', listener, options);\n                });\n            }\n            // run and remove level0\n            if (ws.onclose) {\n                savedOnClose = ws.onclose;\n                ws.onclose(fakeCloseEvent_1);\n                ws.onclose = null;\n            }\n        }\n    };\n    this.send = function (data) {\n        ws.send(data);\n    };\n    this.addEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            if (!listeners[type].some(function (_a) {\n                var l = _a[0];\n                return l === listener;\n            })) {\n                listeners[type].push([listener, options]);\n            }\n        }\n        else {\n            listeners[type] = [[listener, options]];\n        }\n        ws.addEventListener(type, listener, options);\n    };\n    this.removeEventListener = function (type, listener, options) {\n        if (Array.isArray(listeners[type])) {\n            listeners[type] = listeners[type].filter(function (_a) {\n                var l = _a[0];\n                return l !== listener;\n            });\n        }\n        ws.removeEventListener(type, listener, options);\n    };\n};\nmodule.exports = ReconnectingWebsocket;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_reconnecting-websocket@3.2.2@reconnecting-websocket/dist/index.js\n// module id = 3\n// module chunks = 0","/**\n * Created by xieting on 2018/1/2.\n */\n\nimport EventEmitter from 'events';\nimport defaultP2PConfig from './config';\nimport {Tracker, FragLoader} from './bittorrent';\nimport BufferManager from './buffer-manager';\nimport UAParser from 'ua-parser-js';\nimport {Events, Fetcher, getBrowserRTC} from './cdnbye-core';\nimport Logger from './utils/logger';\n\nconst uaParserResult = (new UAParser()).getResult();\n// let logger;\n\nclass P2PEngine extends EventEmitter {\n\n    static get Events() {\n        return Events;\n    }\n\n    static get uaParserResult() {\n        return uaParserResult;\n    }\n\n    constructor(hlsjs, p2pConfig) {\n\n        super();\n\n        this.config = Object.assign({}, defaultP2PConfig, p2pConfig);\n        this.hlsjs = hlsjs;\n        this.p2pEnabled = this.config.disableP2P === false ? false : true;                                      //P2P\n\n        hlsjs.config.currLoaded = hlsjs.config.currPlay = 0;\n\n        const onLevelLoaded = (event, data) => {\n\n            const isLive = data.details.live;\n            this.config.live = isLive;\n            let channel = hlsjs.url.split('?')[0];\n\n            //logger\n            let logger = new Logger(this.config, channel);\n            this.hlsjs.config.logger = this.logger = logger;\n\n            this._init(channel);\n\n            hlsjs.off(hlsjs.constructor.Events.LEVEL_LOADED, onLevelLoaded);\n        };\n\n        hlsjs.on(hlsjs.constructor.Events.LEVEL_LOADED, onLevelLoaded);\n\n\n\n        //streaming rate\n        // this.streamingRate = 0;                        //bps\n        // this.fragLoadedCounter = 0;\n    }\n\n    _init(channel) {\n        const { logger } = this;\n        //\n        let browserInfo = {\n            browser: uaParserResult.browser.name,\n            device: uaParserResult.device.type === 'mobile' ? 'mobile' : 'PC',\n            os: uaParserResult.os.name\n        };\n\n\n        this.hlsjs.config.p2pEnabled = this.p2pEnabled;\n        //BufferManager\n        this.bufMgr = new BufferManager(this, this.config);\n        this.hlsjs.config.bufMgr = this.bufMgr;\n\n\n        //Fetcher\n        let fetcher = new Fetcher(this, this.config.key, window.encodeURIComponent(channel), this.config.announce, browserInfo);\n        this.fetcher = fetcher;\n        //tracker\n        this.signaler = new Tracker(this, fetcher, this.config);\n        this.signaler.scheduler.bufferManager = this.bufMgr;\n        //fLoader\n        this.hlsjs.config.fLoader = FragLoader;\n        //fLoaderscheduler\n        this.hlsjs.config.scheduler = this.signaler.scheduler;\n        //fLoaderfetcher\n        this.hlsjs.config.fetcher = fetcher;\n\n\n        this.hlsjs.on(this.hlsjs.constructor.Events.FRAG_LOADING, (id, data) => {\n            // log('FRAG_LOADING: ' + JSON.stringify(data.frag));\n            logger.debug('FRAG_LOADING: ' + data.frag.sn);\n            this.signaler.currentLoadingSN = data.frag.sn;\n\n        });\n\n        this.signalTried = false;                                                   //ws\n        this.hlsjs.on(this.hlsjs.constructor.Events.FRAG_LOADED, (id, data) => {\n            let sn = data.frag.sn;\n            this.hlsjs.config.currLoaded = sn;\n            this.signaler.currentLoadedSN = sn;                                //BT\n            this.hlsjs.config.currLoadedDuration = data.frag.duration;\n            let bitrate = Math.round(data.frag.loaded*8/data.frag.duration);\n            if (!this.signalTried && !this.signaler.connected && this.config.p2pEnabled) {\n\n                this.signaler.scheduler.bitrate = bitrate;\n                logger.info(`FRAG_LOADED bitrate ${bitrate}`);\n\n                this.signaler.resumeP2P();\n                this.signalTried = true;\n            }\n            // this.streamingRate = (this.streamingRate*this.fragLoadedCounter + bitrate)/(++this.fragLoadedCounter);\n            // this.signaler.scheduler.streamingRate = Math.floor(this.streamingRate);\n            if (!data.frag.loadByHTTP) {\n                data.frag.loadByP2P = false;\n                data.frag.loadByHTTP = true;\n            }\n        });\n\n        this.hlsjs.on(this.hlsjs.constructor.Events.FRAG_CHANGED, (id, data) => {\n            // log('FRAG_CHANGED: '+JSON.stringify(data.frag, null, 2));\n            logger.debug('FRAG_CHANGED: '+data.frag.sn);\n            const sn = data.frag.sn;\n            this.hlsjs.config.currPlay = sn;\n            this.signaler.currentPlaySN = sn;\n        });\n\n        this.hlsjs.on(this.hlsjs.constructor.Events.ERROR, (event, data) => {\n            logger.error(`errorType ${data.type} details ${data.details} errorFatal ${data.fatal}`);\n            const errDetails = this.hlsjs.constructor.ErrorDetails;\n            switch (data.details) {\n                case errDetails.FRAG_LOAD_ERROR:\n                case errDetails.FRAG_LOAD_TIMEOUT:\n                    this.fetcher.errsFragLoad ++;\n                    break;\n                case errDetails.BUFFER_STALLED_ERROR:\n                    this.fetcher.errsBufStalled ++;\n                    break;\n                case errDetails.INTERNAL_EXCEPTION:\n                    this.fetcher.errsInternalExpt ++;\n                    break;\n                default:\n            }\n        });\n\n        this.hlsjs.on(this.hlsjs.constructor.Events.DESTROYING, () => {\n            // log('DESTROYING: '+JSON.stringify(frag));\n            this.signaler.destroy();\n            this.signaler = null;\n\n        });\n    }\n\n    disableP2P() {                                              //p2p\n        const { logger } = this;\n        logger.warn(`disableP2P`);\n        if (this.p2pEnabled) {\n            this.p2pEnabled = false;\n            this.config.p2pEnabled = this.hlsjs.config.p2pEnabled = this.p2pEnabled;\n            if (this.signaler) {\n                this.signaler.stopP2P();\n            }\n        }\n    }\n\n    enableP2P() {                                               //P2P\n        const { logger } = this;\n        logger.warn(`enableP2P`);\n        if (!this.p2pEnabled) {\n            this.p2pEnabled = true;\n            this.config.p2pEnabled = this.hlsjs.config.p2pEnabled = this.p2pEnabled;\n            if (this.signaler) {\n                this.signaler.resumeP2P();\n            }\n        }\n    }\n\n\n\n}\n\nP2PEngine.WEBRTC_SUPPORT = !!getBrowserRTC();\n\nP2PEngine.version = __VERSION__;\n\nexport default P2PEngine\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.engine.js","/**\n * Created by xieting on 2018/1/3.\n */\nimport {config as btConfig} from './bittorrent';\n\n\n//\nlet defaultP2PConfig = {\n    key: 'free',                                //trackerAPI key\n\n    wsSignalerAddr: 'wss://signal.cdnbye.com/wss',          //\n    wsMaxRetries: 3,                           //\n    wsReconnectInterval: 5,                     //websocket\n\n    p2pEnabled: true,                           //P2Ptrue\n\n    dcRequestTimeout: 3,                        //datachannel\n    dcUploadTimeout: 3,                         //datachannel\n    dcPings: 5,                          //datachannelping\n    dcTolerance: 4,                             //peer\n\n    packetSize: 16*1024,                        //datachannel\n    maxBufSize: 1024*1024*50,                   //p2p\n    loadTimeout: 5,                             //p2p\n\n    enableLogUpload: false,                      //logtrue\n    logUploadAddr: \"wss://api.cdnbye.com/trace\", //log\n    logUploadLevel: 'warn',                      //logleveldebuginfowarnerrornonewarn\n    logLevel: 'none',                           //logleveldebuginfowarnerrornonenone\n\n    ...btConfig\n};\n\n// let p2pConfig;\n//\n// if (__EXCLUDE_LIVE__) {\n//     p2pConfig = Object.assign(defaultP2PConfig, vodConfig);\n// } else if (__EXCLUDE_VOD__) {\n//     p2pConfig = Object.assign(defaultP2PConfig, liveConfig);\n// } else {\n//     p2pConfig = Object.assign(defaultP2PConfig, liveConfig, vodConfig);\n// }\n\n\n\nexport default defaultP2PConfig;\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","/**\n * Created by xieting on 2018/3/23.\n */\n\nimport EventEmitter from 'events';\nimport BTScheduler from './bt-scheduler';\nimport SignalClient from '../signal-client';\nimport {DataChannel, Events} from '../cdnbye-core';\n\nclass BTTracker extends EventEmitter {\n    constructor(engine, fetcher, config) {\n        super();\n\n        this.engine = engine;\n        this.config = config;\n        this.connected = false;\n        this.scheduler = new BTScheduler(engine, config);\n        this.DCMap = new Map();                                  //{key: remotePeerId, value: DataChannnel} dc\n        this.failedDCSet= new Set();                            //{remotePeerId} dc\n        this.signalerWs = null;                                  //ws\n        this.heartbeatInterval = 30;\n        //tracker request API\n        this.fetcher = fetcher;\n        /*\n        peers: Array<Object{id:string}>\n         */\n        this.peers = [];\n\n        this._setupScheduler(this.scheduler);\n    }\n\n    set currentPlaySN(sn) {\n        this.scheduler.updatePlaySN(sn);\n    }\n\n    set currentLoadingSN(sn) {\n        this.scheduler.updateLoadingSN(sn);\n    }\n\n    set currentLoadedSN(sn) {\n        this.scheduler.updateLoadedSN(sn);                        //bitmap\n    }\n\n    resumeP2P() {\n        const { logger } = this.engine;\n        this.fetcher.btAnnounce().then(json => {\n            logger.info(`announceURL response ${JSON.stringify(json)}`)\n            this.peerId = json.peer_id;\n            logger.identifier = this.peerId;\n            this.fetcher.btHeartbeat(json.heartbeat_interval);\n            this.fetcher.btStatsStart(json.report_limit);\n            this.signalerWs = this._initSignalerWs();                         //tracker\n            this._handlePeers(json.peers);\n            this.engine.emit('peerId', this.peerId);\n        }).catch(err => {\n\n        })\n    }\n\n    stopP2P() {\n        const { logger } = this.engine;\n        logger.warn(``);\n    }\n\n    destroy() {\n        window.clearInterval(this.heartbeater);\n        this.heartbeater = null;\n    }\n\n    _handlePeers(peers) {\n        for(let peer of peers) {\n            this.peers.push({\n                id: peer.id,\n            })\n        }\n        //\n        this.peers = this.peers.filter(node => {\n            for (let peerId of [...this.DCMap.keys(),...this.failedDCSet.keys()]) {\n                if (node.id === peerId) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n\n    _tryConnectToPeer() {\n        const { logger } = this.engine;\n        if (this.peers.length === 0) return;\n        let remotePeerId = this.peers.pop().id;\n        logger.info(`tryConnectToPeer ${remotePeerId}`);\n        let datachannel = new DataChannel(this.engine, this.peerId, remotePeerId, true, this.config);\n        this.DCMap.set(remotePeerId, datachannel);                                  //Id\n        this._setupDC(datachannel);\n    }\n\n    _setupDC(datachannel) {\n        const { logger } = this.engine;\n        datachannel.on(Events.DC_SIGNAL, data => {\n            const remotePeerId = datachannel.remotePeerId;\n            this.signalerWs.sendSignal(remotePeerId, data);\n            //\n            if (!this.signalTimer && !this.failedDCSet.has(remotePeerId)) {\n                this.signalTimer = window.setTimeout(() => {\n                    this.DCMap.delete(remotePeerId);\n                    this.failedDCSet.add(remotePeerId);              //\n                    logger.warn(`signaling ${remotePeerId} timeout`);\n                    this.signalTimer = null;\n                    this._tryConnectToPeer();\n                }, 10000)\n            }\n\n\n        })\n            .once(Events.DC_ERROR, () => {\n                logger.warn(`datachannel error ${datachannel.channelId}`);\n                this.scheduler.deletePeer(datachannel);\n                this.DCMap.delete(datachannel.remotePeerId);\n                this.failedDCSet.add(datachannel.remotePeerId);                  //\n                this._tryConnectToPeer();\n                datachannel.destroy();\n\n                this._requestMorePeers();\n\n                //conns\n                if (datachannel.isInitiator) {\n                    if (datachannel.connected) {                       //\n                        this.fetcher.decreConns();\n                    } else {                                           //\n                        this.fetcher.increFailConns();\n                    }\n                }\n            })\n            .once(Events.DC_CLOSE, () => {\n\n                logger.warn(`datachannel closed ${datachannel.channelId} `);\n                this.scheduler.deletePeer(datachannel);\n                this.DCMap.delete(datachannel.remotePeerId);\n                this.failedDCSet.add(datachannel.remotePeerId);              //\n                this._tryConnectToPeer();\n\n                datachannel.destroy();\n\n                this._requestMorePeers();\n\n                //conns\n                this.fetcher.decreConns();\n\n\n            })\n            .once(Events.DC_OPEN, () => {\n\n                this.scheduler.handshakePeer(datachannel);\n\n                //dc\n                if (this.DCMap.size < this.config.neighbours) {\n                    this._tryConnectToPeer();\n                }\n\n                //conns\n                this.fetcher.increConns();\n\n            })\n    }\n\n    _initSignalerWs() {\n        const { logger } = this.engine;\n        let websocket = new SignalClient(this.engine, this.peerId, this.config);\n        websocket.onopen = () => {\n            this.connected = true;\n            this._tryConnectToPeer();\n        };\n\n        websocket.onmessage = (e) => {\n            let msg = JSON.parse(e.data);\n            let action = msg.action;\n            switch (action) {\n                case 'signal':\n                    if (this.failedDCSet.has(msg.from_peer_id)) return;\n                    logger.debug(`start handle signal of ${msg.from_peer_id}`);\n                    window.clearTimeout(this.signalTimer);                       //\n                    this.signalTimer = null;\n                    if (!msg.data) {                                             //\n                        this.DCMap.delete(msg.from_peer_id);\n                        this.failedDCSet.add(msg.from_peer_id);              //\n                        logger.info(`signaling ${msg.from_peer_id} not found`);\n                        this._tryConnectToPeer();\n                    } else {\n                        this._handleSignal(msg.from_peer_id, msg.data);\n                    }\n                    break;\n                case 'reject':\n                    this.stopP2P();\n                    break;\n                default:\n                    logger.warn('Signaler websocket unknown action ' + action);\n\n            }\n\n        };\n        websocket.onclose = () => {                                            //websocketdatachannel\n            this.connected = false;\n            this.destroy();\n        };\n        return websocket;\n    }\n\n    _handleSignal(remotePeerId, data) {\n        const { logger } = this.engine;\n        let datachannel = this.DCMap.get(remotePeerId);\n        if (datachannel && datachannel.connected) {\n            logger.info(`datachannel had connected, signal ignored`);\n            return\n        }\n        if (!datachannel) {                                               //\n            logger.debug(`receive node ${remotePeerId} connection request`);\n            if (this.failedDCSet.has(remotePeerId)) return;\n            datachannel = new DataChannel(this.engine, this.peerId, remotePeerId, false, this.config);\n            this.DCMap.set(remotePeerId, datachannel);                                  //Id\n            this._setupDC(datachannel);\n        }\n        datachannel.receiveSignal(data);\n    }\n\n    _setupScheduler(s) {\n\n    }\n\n    _heartbeat() {\n        this.heartbeater = window.setInterval(() => {\n            this.fetcher.btHeartbeat();\n        }, this.heartbeatInterval * 1000)\n    }\n\n    _requestMorePeers() {\n        const { logger } = this.engine;\n        if (this.scheduler.peerMap.size <= Math.floor(this.config.neighbours/2)) {\n            this.fetcher.btGetPeers().then(json => {\n                logger.info(`_requestMorePeers ${JSON.stringify(json)}`);\n                this._handlePeers(json.peers);\n                this._tryConnectToPeer();\n            })\n        }\n    }\n\n\n}\n\nexport default BTTracker;\n\n\n// WEBPACK FOOTER //\n// ./src/bittorrent/bt-tracker.js","/**\n * Created by xieting on 2018/3/23.\n */\n\nimport EventEmitter from 'events';\nimport {Events} from '../cdnbye-core';\n\nclass BTScheduler extends EventEmitter {\n    constructor(engine, config) {\n        super();\n\n        this.engine = engine;\n        this.config = config;\n        this.bufMgr = null;\n        this.peerMap = new Map();                 // remotePeerId -> dc\n        this.bitset = new Set();                  //bitfield\n        this.bitCounts = new Map();               //peersbufferBTrearest first  index -> count\n\n    }\n\n    updateLoadedSN(sn) {\n        this.bitset.add(sn);                      //bitset\n        if (this.bitCounts.has(sn)) {\n            this.bitCounts.delete(sn)             //bitCounts\n        }\n        if (this.peerMap.size > 0) {\n            const msg = {\n                event: Events.DC_HAVE,\n                sn: sn\n            };\n            this._broadcastToPeers(msg);\n        }\n    }\n\n    updateLoadingSN(sn) {                                                           //hls.jssn\n        this.loadingSN = sn;\n    }\n\n    updatePlaySN(sn) {\n        const { logger } = this.engine;\n        if (this.config.live) return;                                                 //rearest firstvod\n        if (!this.hasPeers) return;\n        let requested = [];\n        for (let idx=sn+1;idx<=sn+this.config.urgentOffset+1;idx++) {\n            if (!this.bitset.has(idx) && idx !== this.loadingSN && this.bitCounts.has(idx)) {                  //peers\n                for (let peer of this.peerMap.values()) {                           //peer\n                    if (peer.downloading === false && peer.bitset.has(idx)) {\n                        peer.requestDataBySN(idx, true);\n                        logger.debug(`request urgent ${idx} from peer ${peer.remotePeerId}`);\n                        requested.push(idx);\n                        break;\n                    }\n                }\n            }\n        }\n\n        //rearest first\n        let idlePeers = this._getIdlePeer();\n        if (idlePeers.length === 0 || this.bitCounts.size === 0 || this.bufMgr.overflowed) return;        //rearest first\n        let sortedArr = [...this.bitCounts.entries()].sort((item1, item2) => {\n            return item1[1] < item2[1];\n        });\n        if (sortedArr.length === 0) return;\n        //rearest\n        let rearest = sortedArr.pop()[0];\n        while (rearest === this.loadingSN || requested.includes(rearest)) {         //loadingrequested\n            if (sortedArr.length === 0) return;\n            rearest = sortedArr.pop()[0];\n        }\n        for (let peer of idlePeers) {\n            if (peer.bitset.has(rearest)) {\n                peer.requestDataBySN(rearest, false);\n                logger.debug(`request rearest ${rearest} from peer ${peer.remotePeerId}`);\n                break;\n            }\n        }\n\n    }\n\n    deletePeer(dc) {\n        if (this.peerMap.has(dc.remotePeerId)) {\n            dc.bitset.forEach( value => {\n                this._decreBitCounts(value);\n            });\n            this.peerMap.delete(dc.remotePeerId);\n        }\n        this.engine.emit('peers', [...this.peerMap.keys()]);\n    }\n\n    handshakePeer(dc) {\n        this._setupDC(dc);\n        dc.sendBitField(Array.from(this.bitset))            //peerbitfield\n    }\n\n    addPeer(peer) {\n        const { logger } = this.engine;\n        logger.info(`add peer ${peer.remotePeerId}`);\n        this.peerMap.set(peer.remotePeerId, peer);\n\n        this.engine.emit('peers', [...this.peerMap.keys()]);\n    }\n\n    peersHasSN(sn) {\n        return this.bitCounts.has(sn);\n    }\n\n    load(context, config, callbacks) {\n        const { logger } = this.engine;\n        this.context = context;\n        const frag = context.frag;\n        this.callbacks = callbacks;\n        this.stats = {trequest: performance.now(), retry: 0, tfirst: 0, tload: 0, loaded: 0};\n        this.criticalSeg = {sn: frag.sn, relurl: frag.relurl};\n\n        let target;\n        for (let peer of this.peerMap.values()) {\n            if (peer.bitset.has(frag.sn)) {\n                target = peer;\n            }\n        }\n\n        if (target) {\n            // target.requestDataBySN(frag.sn, true);\n            target.requestDataByURL(frag.relurl, true);                            //criticalurl\n            logger.info(`request criticalSeg url ${frag.relurl} at ${frag.sn}`);\n        }\n        this.criticaltimeouter = window.setTimeout(this._criticaltimeout.bind(this), this.config.loadTimeout*1000);\n    }\n\n    get hasPeers() {\n        return this.peerMap.size > 0;\n    }\n\n    set bufferManager(bm) {\n        this.bufMgr = bm;\n\n        bm.on(Events.BM_LOST, sn => {\n            this._broadcastToPeers({                                //peerssn\n                event: Events.DC_LOST,\n                sn: sn\n            });\n            this.bitset.delete(sn);\n        })\n    }\n\n    _setupDC(dc) {\n        const { logger } = this.engine;\n        dc.on(Events.DC_BITFIELD, msg => {\n            if (!msg.field) return;\n            let bitset = new Set(msg.field);\n            dc.bitset = bitset;\n            msg.field.forEach( value => {\n                if (!this.bitset.has(value)) {              //\n                    this._increBitCounts(value);\n                }\n            });\n            this.addPeer(dc);                               //bitfieldpeerMap\n        })\n            .on(Events.DC_HAVE, msg => {\n                if (!msg.sn || !dc.bitset) return;\n                const sn = msg.sn;\n                dc.bitset.add(sn);\n                if (!this.bitset.has(sn)) {              //\n                    this._increBitCounts(sn);\n                }\n            })\n            .on(Events.DC_LOST, msg => {\n                if (!msg.sn || !dc.bitset) return;\n                const sn = msg.sn;\n                dc.bitset.delete(sn);\n                this._decreBitCounts(sn);\n            })\n            .on(Events.DC_PIECE, msg => {                                                  //piece\n                if (this.criticalSeg && this.criticalSeg.relurl === msg.url) {                    //critical\n                    this.stats.tfirst = Math.max(performance.now(), this.stats.trequest);\n                }\n            })\n            .on(Events.DC_PIECE_NOT_FOUND, msg => {\n                if (this.criticalSeg && this.criticalSeg.relurl === msg.url) {                    //critical\n                    window.clearTimeout(this.criticaltimeouter);                             //\n                    this.criticaltimeouter = null;\n                    this._criticaltimeout();                                                   //xhr\n                }\n            })\n            .on(Events.DC_RESPONSE, response => {                                            //\n                if (this.criticalSeg && this.criticalSeg.relurl === response.url && this.criticaltimeouter) {\n                    logger.info(`receive criticalSeg url ${response.url}`);\n                    window.clearTimeout(this.criticaltimeouter);                             //\n                    this.criticaltimeouter = null;\n                    let stats = this.stats;\n                    stats.tload = Math.max(stats.tfirst, performance.now());\n                    stats.loaded = stats.total = response.data.byteLength;\n                    this.criticalSeg = null;\n                    this.callbacks.onSuccess(response, stats, this.context);\n                } else {\n                    this.bufMgr.addBuffer(response.sn, response.url, response.data);\n                }\n                this.updateLoadedSN(response.sn);\n            })\n            .on(Events.DC_REQUEST, msg => {\n                let url = '';\n                if (!msg.url) {                                    //snrequest\n                    url = this.bufMgr.getURLbySN(msg.sn);\n                } else {                                           //urlrequest\n                    url = msg.url;\n                }\n                if (url && this.bufMgr.hasSegOfURL(url)) {\n                    let seg = this.bufMgr.getSegByURL(url);\n                    dc.sendBuffer(msg.sn, seg.relurl, seg.data);\n                } else {\n                    dc.sendJson({\n                        event: Events.DC_PIECE_NOT_FOUND,\n                        url: url,\n                        sn: msg.sn\n                    })\n                }\n            })\n            .on(Events.DC_TIMEOUT, () => {\n                logger.warn(`DC_TIMEOUT`);\n            })\n    }\n\n    _broadcastToPeers(msg) {\n        for (let peer of this.peerMap.values()) {\n            peer.sendJson(msg);\n        }\n    }\n\n    _getIdlePeer() {\n        return [...this.peerMap.values()].filter(peer => {\n            return peer.downloading === false;\n        });\n    }\n\n    _decreBitCounts(index) {\n        if (this.bitCounts.has(index)) {\n            let last = this.bitCounts.get(index);\n            // this.bitCounts.set(index, last-1);\n            // if (this.bitCounts.get(index) === 0) {\n            //     this.bitCounts.delete(index);\n            // }\n            if (last === 1) {\n                this.bitCounts.delete(index);\n            } else {\n                this.bitCounts.set(index, last-1);\n            }\n        }\n    }\n\n    _increBitCounts(index) {\n        if (!this.bitCounts.has(index)) {\n            this.bitCounts.set(index, 1);\n        } else {\n            let last = this.bitCounts.get(index);\n            this.bitCounts.set(index, last+1);\n        }\n    }\n\n    _criticaltimeout() {\n        const { logger } = this.engine;\n        logger.warn(`_criticaltimeout`);\n        this.criticalSeg = null;\n        this.callbacks.onTimeout(this.stats, this.context, null);\n        this.criticaltimeouter = null;\n    }\n}\n\n\nexport default BTScheduler;\n\n\n// WEBPACK FOOTER //\n// ./src/bittorrent/bt-scheduler.js","/*The core component of cdnbye project*/\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.CDNByeCore=t():e.CDNByeCore=t()}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=18)}([function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){g&&d&&(g=!1,d.length?p=d.concat(p):y=-1,p.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,l,h=e.exports={};!function(){try{f=\"function\"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,p=[],g=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||g||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title=\"browser\",h.browser=!0,h.env={},h.argv=[],h.version=\"\",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error(\"process.binding is not supported\")},h.cwd=function(){return\"/\"},h.chdir=function(e){throw new Error(\"process.chdir is not supported\")},h.umask=function(){return 0}},function(e,t){\"function\"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){\"use strict\";function r(e){if(!(this instanceof r))return new r(e);c.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once(\"end\",i)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=n(7),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(6);u.inherits=n(2);var c=n(11),f=n(14);u.inherits(r,c);for(var l=s(f.prototype),h=0;h<l.length;h++){var d=l[h];r.prototype[d]||(r.prototype[d]=f.prototype[d])}Object.defineProperty(r.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},function(e,t,n){\"use strict\";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError(\"Invalid typed array length\");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if(\"number\"==typeof e){if(\"string\"==typeof t)throw new Error(\"If encoding is specified then the first argument must be a string\");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):\"string\"==typeof t?f(e,t,n):d(e,t)}function s(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be a number');if(e<0)throw new RangeError('\"size\" argument must not be negative')}function u(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?\"string\"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if(\"string\"==typeof n&&\"\"!==n||(n=\"utf8\"),!o.isEncoding(n))throw new TypeError('\"encoding\" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function l(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError(\"'offset' is out of bounds\");if(t.byteLength<n+(r||0))throw new RangeError(\"'length' is out of bounds\");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function d(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if(\"undefined\"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||\"length\"in t)return\"number\"!=typeof t.length||V(t.length)?i(e,0):l(e,t);if(\"Buffer\"===t.type&&Z(t.data))return l(e,t.data)}throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}function p(e){if(e>=r())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+r().toString(16)+\" bytes\");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;\"string\"!=typeof e&&(e=\"\"+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return z(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return J(e).length;default:if(r)return z(e).length;t=(\"\"+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return\"\";if(n>>>=0,t>>>=0,n<=t)return\"\";for(e||(e=\"utf8\");;)switch(e){case\"hex\":return D(this,t,n);case\"utf8\":case\"utf-8\":return k(this,t,n);case\"ascii\":return I(this,t,n);case\"latin1\":case\"binary\":return x(this,t,n);case\"base64\":return A(this,t,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return O(this,t,n);default:if(r)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if(\"string\"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if(\"string\"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if(\"number\"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError(\"val must be string, number or Buffer\")}function b(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&(\"ucs2\"===(r=String(r).toLowerCase())||\"ucs-2\"===r||\"utf16le\"===r||\"utf-16le\"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*a}else-1!==f&&(c-=c-f),f=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var l=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){l=!1;break}if(l)return c}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError(\"Invalid hex string\");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function C(e,t,n,r){return Q(z(t,e.length-n),e,n,r)}function T(e,t,n,r){return Q(G(t),e,n,r)}function E(e,t,n,r){return T(e,t,n,r)}function S(e,t,n,r){return Q(J(t),e,n,r)}function R(e,t,n,r){return Q(H(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,f,l;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(l=(31&o)<<6|63&u)>127&&(a=l);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return P(r)}function P(e){var t=e.length;if(t<=X)return String.fromCharCode.apply(String,e);for(var n=\"\",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=X));return n}function I(e,t,n){var r=\"\";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r=\"\";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function D(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i=\"\",o=t;o<n;++o)i+=W(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i=\"\",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(e+t>n)throw new RangeError(\"Trying to access beyond buffer length\")}function M(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('\"value\" argument is out of bounds');if(n+r>e.length)throw new RangeError(\"Index out of range\")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function U(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function q(e){if(e=Y(e).replace(ee,\"\"),e.length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}function Y(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,\"\")}function W(e){return e<16?\"0\"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function J(e){return K.toByteArray(q(e))}function Q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function V(e){return e!==e}var K=n(21),$=n(22),Z=n(9);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&\"function\"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,\"undefined\"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return u(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError(\"Arguments must be Buffers\");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('\"list\" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?\"\":0===arguments.length?k(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e=\"\",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString(\"hex\",0,n).match(/.{2}/g).join(\" \"),this.length>n&&(e+=\" ... \")),\"<Buffer \"+e+\">\"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError(\"out of range index\");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,u=Math.min(a,s),c=this.slice(r,i),f=e.slice(t,n),l=0;l<u;++l)if(c[l]!==f[l]){a=c[l],s=f[l];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r=\"utf8\",n=this.length,t=0;else if(void 0===n&&\"string\"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");t|=0,isFinite(n)?(n|=0,void 0===r&&(r=\"utf8\")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");r||(r=\"utf8\");for(var o=!1;;)switch(r){case\"hex\":return w(this,e,t,n);case\"utf8\":case\"utf-8\":return C(this,e,t,n);case\"ascii\":return T(this,e,t,n);case\"latin1\":case\"binary\":return E(this,e,t,n);case\"base64\":return S(this,e,t,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return R(this,e,t,n);default:if(o)throw new TypeError(\"Unknown encoding: \"+r);r=(\"\"+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),$.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),$.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),$.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),$.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(r<0)throw new RangeError(\"sourceEnd out of bounds\");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if(\"string\"==typeof e){if(\"string\"==typeof t?(r=t,t=0,n=this.length):\"string\"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&\"string\"!=typeof r)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof r&&!o.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r)}else\"number\"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError(\"Out of range index\");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if(\"number\"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:z(new o(e,r).toString()),u=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\\/0-9A-Za-z-_]/g}).call(t,n(0))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=n(4),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(a,i),i.from=function(e,t,n){if(\"number\"==typeof e)throw new TypeError(\"Argument must not be a number\");return a(e,t,n)},i.alloc=function(e,t,n){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");var r=a(e);return void 0!==t?\"string\"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return a(e)},i.allocUnsafeSlow=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return o.SlowBuffer(e)}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===y(e)}function r(e){return\"boolean\"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return\"number\"==typeof e}function s(e){return\"string\"==typeof e}function u(e){return\"symbol\"==typeof e}function c(e){return void 0===e}function f(e){return\"[object RegExp]\"===y(e)}function l(e){return\"object\"==typeof e&&null!==e}function h(e){return\"[object Date]\"===y(e)}function d(e){return\"[object Error]\"===y(e)||e instanceof Error}function p(e){return\"function\"==typeof e}function g(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"==typeof e||void 0===e}function y(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=c,t.isRegExp=f,t.isObject=l,t.isDate=h,t.isError=d,t.isFunction=p,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(4).Buffer)},function(e,t,n){\"use strict\";(function(t){function n(e,n,r,i){if(\"function\"!=typeof e)throw new TypeError('\"callback\" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf(\"v0.\")||0===t.version.indexOf(\"v1.\")&&0!==t.version.indexOf(\"v1.8.\")?e.exports={nextTick:n}:e.exports=t}).call(t,n(1))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return\"function\"==typeof e}function i(e){return\"number\"==typeof e}function o(e){return\"object\"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError(\"n must be a positive number\");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),\"error\"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified \"error\" event. ('+t+\")\");throw f.context=t,f}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError(\"listener must be a function\");return this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[e].length),\"function\"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError(\"listener must be a function\");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit(\"removeListener\",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit(\"removeListener\",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)\"removeListener\"!==t&&this.removeAllListeners(t);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return\"[object Array]\"==n.call(e)}},function(e,t){e.exports=function(){if(\"undefined\"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t,n){\"use strict\";(function(t,r){function i(e){return B.from(e)}function o(e){return B.isBuffer(e)||e instanceof F}function a(e,t,n){if(\"function\"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?L(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){O=O||n(3),e=e||{};var r=t instanceof O;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new W,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Y||(Y=n(15).StringDecoder),this.decoder=new Y(e.encoding),this.encoding=e.encoding)}function u(e){if(O=O||n(3),!(this instanceof u))return new u(e);this._readableState=new s(e,this),this.readable=!0,e&&(\"function\"==typeof e.read&&(this._read=e.read),\"function\"==typeof e.destroy&&(this._destroy=e.destroy)),N.call(this)}function c(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,g(e,a);else{var s;o||(s=l(a,t)),s?e.emit(\"error\",s):a.objectMode||t&&t.length>0?(\"string\"==typeof t||a.objectMode||Object.getPrototypeOf(t)===B.prototype||(t=i(t)),r?a.endEmitted?e.emit(\"error\",new Error(\"stream.unshift() after end event\")):f(e,a,t,!0):a.ended?e.emit(\"error\",new Error(\"stream.push() after EOF\")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?f(e,a,t,!1):v(e,a)):f(e,a,t,!1))):r||(a.reading=!1)}return h(a)}function f(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit(\"data\",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&y(e)),v(e,t)}function l(e,t){var n;return o(t)||\"string\"==typeof t||void 0===t||e.objectMode||(n=new TypeError(\"Invalid non-string/buffer chunk\")),n}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,y(e)}}function y(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(q(\"emitReadable\",t.flowing),t.emittedReadable=!0,t.sync?D.nextTick(m,e):m(e))}function m(e){q(\"emit readable\"),e.emit(\"readable\"),E(e)}function v(e,t){t.readingMore||(t.readingMore=!0,D.nextTick(_,e,t))}function _(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(q(\"maybeReadMore read 0\"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;q(\"pipeOnDrain\",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&M(e,\"data\")&&(t.flowing=!0,E(e))}}function w(e){q(\"readable nexttick read 0\"),e.read(0)}function C(e,t){t.resumeScheduled||(t.resumeScheduled=!0,D.nextTick(T,e,t))}function T(e,t){t.reading||(q(\"resume read 0\"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit(\"resume\"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(q(\"flow\",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(\"\"):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=R(e,t.buffer,t.decoder),n}function R(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):k(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function k(e,t){var n=B.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function P(e){var t=e._readableState;if(t.length>0)throw new Error('\"endReadable()\" called on non-empty stream');t.endEmitted||(t.ended=!0,D.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit(\"end\"))}function x(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var D=n(7);e.exports=u;var O,L=n(9);u.ReadableState=s;var M=(n(8).EventEmitter,function(e,t){return e.listeners(t).length}),N=n(12),B=n(5).Buffer,F=t.Uint8Array||function(){},U=n(6);U.inherits=n(2);var j=n(28),q=void 0;q=j&&j.debuglog?j.debuglog(\"stream\"):function(){};var Y,W=n(29),z=n(13);U.inherits(u,N);var G=[\"error\",\"close\",\"destroy\",\"pause\",\"resume\"];Object.defineProperty(u.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=z.destroy,u.prototype._undestroy=z.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:\"string\"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=B.from(e,t),t=\"\"),n=!0),c(this,e,t,!1,n)},u.prototype.unshift=function(e){return c(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(e){return Y||(Y=n(15).StringDecoder),this._readableState.decoder=new Y(e),this._readableState.encoding=e,this};var H=8388608;u.prototype.read=function(e){q(\"read\",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return q(\"read: emitReadable\",t.length,t.ended),0===t.length&&t.ended?P(this):y(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&P(this),null;var r=t.needReadable;q(\"need readable\",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,q(\"length less than watermark\",r)),t.ended||t.reading?(r=!1,q(\"reading or ended\",r)):r&&(q(\"do read\"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return i=e>0?S(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&P(this)),null!==i&&this.emit(\"data\",i),i},u.prototype._read=function(e){this.emit(\"error\",new Error(\"_read() is not implemented\"))},u.prototype.pipe=function(e,t){function n(e,t){q(\"onunpipe\"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){q(\"onend\"),e.end()}function o(){q(\"cleanup\"),e.removeListener(\"close\",c),e.removeListener(\"finish\",f),e.removeListener(\"drain\",y),e.removeListener(\"error\",u),e.removeListener(\"unpipe\",n),h.removeListener(\"end\",i),h.removeListener(\"end\",l),h.removeListener(\"data\",s),m=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||y()}function s(t){q(\"ondata\"),v=!1,!1!==e.write(t)||v||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==x(d.pipes,e))&&!m&&(q(\"false write response, pause\",h._readableState.awaitDrain),h._readableState.awaitDrain++,v=!0),h.pause())}function u(t){q(\"onerror\",t),l(),e.removeListener(\"error\",u),0===M(e,\"error\")&&e.emit(\"error\",t)}function c(){e.removeListener(\"finish\",f),l()}function f(){q(\"onfinish\"),e.removeListener(\"close\",c),l()}function l(){q(\"unpipe\"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,q(\"pipe count=%d opts=%j\",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=p?i:l;d.endEmitted?D.nextTick(g):h.once(\"end\",g),e.on(\"unpipe\",n);var y=b(h);e.on(\"drain\",y);var m=!1,v=!1;return h.on(\"data\",s),a(e,\"error\",u),e.once(\"close\",c),e.once(\"finish\",f),e.emit(\"pipe\",h),d.flowing||(q(\"pipe resume\"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit(\"unpipe\",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit(\"unpipe\",this,n);return this}var a=x(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit(\"unpipe\",this,n),this)},u.prototype.on=function(e,t){var n=N.prototype.on.call(this,e,t);if(\"data\"===e)!1!==this._readableState.flowing&&this.resume();else if(\"readable\"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&y(this):D.nextTick(w,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(q(\"resume\"),e.flowing=!0,C(this,e)),this},u.prototype.pause=function(){return q(\"call pause flowing=%j\",this._readableState.flowing),!1!==this._readableState.flowing&&(q(\"pause\"),this._readableState.flowing=!1,this.emit(\"pause\")),this},u.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on(\"end\",function(){if(q(\"wrapped end\"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on(\"data\",function(i){if(q(\"wrapped data\"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){t.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&\"function\"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<G.length;o++)e.on(G[o],this.emit.bind(this,G[o]));return this._read=function(t){q(\"wrapped _read\",t),r&&(r=!1,e.resume())},this},Object.defineProperty(u.prototype,\"readableHighWaterMark\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=S}).call(t,n(0),n(1))},function(e,t,n){e.exports=n(8).EventEmitter},function(e,t,n){\"use strict\";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit(\"error\",t)}var a=n(7);e.exports={destroy:r,undestroy:i}},function(e,t,n){\"use strict\";(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){A(t,e)}}function a(e){return L.from(e)}function s(e){return L.isBuffer(e)||e instanceof M}function u(){}function c(e,t){P=P||n(3),e=e||{};var r=t instanceof P;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,a=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function f(e){if(P=P||n(3),!(B.call(f,this)||this instanceof P))return new f(e);this._writableState=new c(e,this),this.writable=!0,e&&(\"function\"==typeof e.write&&(this._write=e.write),\"function\"==typeof e.writev&&(this._writev=e.writev),\"function\"==typeof e.destroy&&(this._destroy=e.destroy),\"function\"==typeof e.final&&(this._final=e.final)),O.call(this)}function l(e,t){var n=new Error(\"write after end\");e.emit(\"error\",n),k.nextTick(t,n)}function h(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError(\"May not write null values to stream\"):\"string\"==typeof n||void 0===n||t.objectMode||(o=new TypeError(\"Invalid non-string/buffer chunk\")),o&&(e.emit(\"error\",o),k.nextTick(r,o),i=!1),i}function d(e,t,n){return e.objectMode||!1===e.decodeStrings||\"string\"!=typeof t||(t=L.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var a=d(t,r,i);r!==a&&(n=!0,i=\"buffer\",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,s,r,i,o);return u}function g(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function y(e,t,n,r,i){--t.pendingcb,n?(k.nextTick(i,r),k.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit(\"error\",r)):(i(r),e._writableState.errorEmitted=!0,e.emit(\"error\",r),S(e,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(m(n),t)y(e,n,r,t,i);else{var o=C(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?I(_,e,n,o,i):_(e,n,o,i)}}function _(e,t,n,r){n||b(e,t),t.pendingcb--,r(),S(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit(\"drain\"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,g(e,t,!0,t.length,i,\"\",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,l=n.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final(function(n){t.pendingcb--,n&&e.emit(\"error\",n),t.prefinished=!0,e.emit(\"prefinish\"),S(e,t)})}function E(e,t){t.prefinished||t.finalCalled||(\"function\"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,k.nextTick(T,e,t)):(t.prefinished=!0,e.emit(\"prefinish\")))}function S(e,t){var n=C(t);return n&&(E(e,t),0===t.pendingcb&&(t.finished=!0,e.emit(\"finish\"))),n}function R(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?k.nextTick(n):e.once(\"finish\",n)),t.ended=!0,e.writable=!1}function A(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var k=n(7);e.exports=f;var P,I=!t.browser&&[\"v0.10\",\"v0.9.\"].indexOf(t.version.slice(0,5))>-1?r:k.nextTick;f.WritableState=c;var x=n(6);x.inherits=n(2);var D={deprecate:n(33)},O=n(12),L=n(5).Buffer,M=i.Uint8Array||function(){},N=n(13);x.inherits(f,O),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,\"buffer\",{get:D.deprecate(function(){return this.getBuffer()},\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\",\"DEP0003\")})}catch(e){}}();var B;\"function\"==typeof Symbol&&Symbol.hasInstance&&\"function\"==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||this===f&&(e&&e._writableState instanceof c)}})):B=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit(\"error\",new Error(\"Cannot pipe, not readable\"))},f.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&s(e);return o&&!L.isBuffer(e)&&(e=a(e)),\"function\"==typeof t&&(n=t,t=null),o?t=\"buffer\":t||(t=r.defaultEncoding),\"function\"!=typeof n&&(n=u),r.ended?l(this,n):(o||h(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},f.prototype.setDefaultEncoding=function(e){if(\"string\"==typeof e&&(e=e.toLowerCase()),!([\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((e+\"\").toLowerCase())>-1))throw new TypeError(\"Unknown encoding: \"+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,n){n(new Error(\"_write() is not implemented\"))},f.prototype._writev=null,f.prototype.end=function(e,t,n){var r=this._writableState;\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||R(this,r,n)},Object.defineProperty(f.prototype,\"destroyed\",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=N.destroy,f.prototype._undestroy=N.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(1),n(31).setImmediate,n(0))},function(e,t,n){\"use strict\";function r(e){if(!e)return\"utf8\";for(var t;;)switch(e){case\"utf8\":case\"utf-8\":return\"utf8\";case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return\"utf16le\";case\"latin1\":case\"binary\":return\"latin1\";case\"base64\":case\"ascii\":case\"hex\":return e;default:if(t)return;e=(\"\"+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if(\"string\"!=typeof t&&(v.isEncoding===_||!_(e)))throw new Error(\"Unknown encoding: \"+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case\"utf16le\":this.text=h,this.end=d,t=4;break;case\"utf8\":this.fillLast=c,t=4;break;case\"base64\":this.text=p,this.end=g,t=3;break;default:return this.write=y,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function u(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,\"\";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,\"\";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,\"\"}}function c(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString(\"utf8\",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(\"utf8\",t,r)}function l(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+\"\":t}function h(e,t){if((e.length-t)%2==0){var n=e.toString(\"utf16le\",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(\"utf16le\",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):\"\";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(\"utf16le\",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString(\"base64\",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(\"base64\",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+this.lastChar.toString(\"base64\",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):\"\"}var v=n(5).Buffer,_=v.isEncoding||function(e){switch((e=\"\"+e)&&e.toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":case\"raw\":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return\"\";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return\"\";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||\"\"},o.prototype.end=l,o.prototype.text=f,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){\"use strict\";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit(\"error\",new Error(\"write callback called multiple times\"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(\"function\"==typeof e.transform&&(this._transform=e.transform),\"function\"==typeof e.flush&&(this._flush=e.flush)),this.on(\"prefinish\",o)}function o(){var e=this;\"function\"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit(\"error\",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error(\"Calling transform done when ws.length != 0\");if(e._transformState.transforming)throw new Error(\"Calling transform done when still transforming\");return e.push(null)}e.exports=i;var s=n(3),u=n(6);u.inherits=n(2),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error(\"_transform() is not implemented\")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit(\"close\")})}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={DC_PING:\"PING\",DC_PONG:\"PONG\",DC_SIGNAL:\"SIGNAL\",DC_OPEN:\"OPEN\",DC_REQUEST:\"REQUEST\",DC_PIECE_NOT_FOUND:\"PIECE_NOT_FOUND\",DC_CLOSE:\"CLOSE\",DC_RESPONSE:\"RESPONSE\",DC_ERROR:\"ERROR\",DC_PIECE:\"PIECE\",DC_TIMEOUT:\"TIMEOUT\",DC_PIECE_ACK:\"PIECE_ACK\",DC_TRANSITION:\"TRANSITION\",DC_GRANT:\"GRANT\",DC_LACK:\"LACK\",DC_DISPLACE:\"DISPLACE\",DC_BITFIELD:\"BITFIELD\",DC_CHOKE:\"CHOKE\",DC_UNCHOKE:\"UNCHOKE\",DC_INTERESTED:\"INTERESTED\",DC_NOTINTERESTED:\"NOT_INTERESTED\",DC_HAVE:\"HAVE\",DC_LOST:\"LOST\",BM_LOST:\"lost\",SEGMENT:\"segment\",TRANSITION:\"transition\",DISPLACE:\"displace\",CONNECT:\"connect\",ADOPT:\"adopt\"},e.exports=t.default},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getBrowserRTC=t.Buffer=t.Fetcher=t.Events=t.DataChannel=void 0;var i=n(19),o=r(i),a=n(17),s=r(a),u=n(35),c=r(u),f=n(10),l=r(f),h=n(4).Buffer;t.DataChannel=o.default,t.Events=s.default,t.Fetcher=c.default,t.Buffer=h,t.getBrowserRTC=l.default},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r){var i=[];if(r){for(var o=void 0,a=0;a<n-1;a++)o=e.slice(a*t,(a+1)*t),i.push(o);o=e.slice(e.byteLength-r,e.byteLength),i.push(o)}else for(var s=void 0,u=0;u<n;u++)s=e.slice(u*t,(u+1)*t),i.push(s);return i}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(20),f=r(c),l=n(8),h=r(l),d=n(17),p=r(d),g=n(4).Buffer,y=function(e){function t(e,n,r,a,s){i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.engine=e,u.config=s,u.remotePeerId=r,u.channelId=a?n+\"-\"+r:r+\"-\"+n,u.connected=!1,u.msgQueue=[],u.miss=0,u.rcvdReqQueue=[],u.downloading=!1,u.uploading=!1,u.delays=[],u._datachannel=new f.default({initiator:a,objectMode:!0}),u.isInitiator=a,u._init(u._datachannel),u.streamingRate=0,u.recordSended=u._adjustStreamingRate(10),u}return a(t,e),u(t,[{key:\"_init\",value:function(e){var t=this,n=this.engine.logger;e.on(\"error\",function(e){t.emit(p.default.DC_ERROR)}),e.on(\"signal\",function(e){t.emit(p.default.DC_SIGNAL,e)});var r=function(){for(n.info(\"datachannel CONNECTED to \"+t.remotePeerId),t.connected=!0,t.emit(p.default.DC_OPEN),t._sendPing();t.msgQueue.length>0;){var e=t.msgQueue.shift();t.emit(e.event,e)}};e.once(\"connect\",r),e.on(\"data\",function(e){if(\"string\"==typeof e){n.debug(\"datachannel receive string: \"+e+\"from \"+t.remotePeerId);var r=JSON.parse(e);if(!t.connected)return void t.msgQueue.push(r);switch(r.event){case p.default.DC_PONG:t._handlePongMsg();break;case p.default.DC_PING:t.sendJson({event:p.default.DC_PONG});break;case p.default.DC_PIECE:t._prepareForBinary(r.attachments,r.url,r.sn,r.size),t.emit(r.event,r);break;case p.default.DC_PIECE_NOT_FOUND:window.clearTimeout(t.requestTimeout),t.requestTimeout=null,t.emit(r.event,r);break;case p.default.DC_REQUEST:t._handleRequestMsg(r);break;case p.default.DC_GRANT:t._handleGrant(r);break;case p.default.DC_PIECE_ACK:t._handlePieceAck();break;default:t.emit(r.event,r)}}else t.bufArr.push(e),0===--t.remainAttachments&&(window.clearTimeout(t.requestTimeout),t.requestTimeout=null,t.sendJson({event:p.default.DC_PIECE_ACK,sn:t.bufSN,url:t.bufUrl}),t._handleBinaryData())}),e.once(\"close\",function(){t.emit(p.default.DC_CLOSE)})}},{key:\"sendJson\",value:function(e){this.send(JSON.stringify(e))}},{key:\"send\",value:function(e){this._datachannel&&this._datachannel.connected&&this._datachannel.send(e)}},{key:\"sendBitField\",value:function(e){this.sendJson({event:p.default.DC_BITFIELD,field:e})}},{key:\"sendBuffer\",value:function(e,t,n){this.uploading=!0,this.uploadTimeout=window.setTimeout(this._uploadtimeout.bind(this),1e3*this.config.dcUploadTimeout);var r=n.byteLength,i=this.config.packetSize,o=0,a=0;r%i==0?a=r/i:(a=Math.floor(r/i)+1,o=r%i);var u={event:p.default.DC_PIECE,attachments:a,url:t,sn:e,size:r};this.sendJson(u);for(var c=s(n,i,a,o),f=0;f<c.length;f++)this.send(c[f]);this.recordSended(r)}},{key:\"requestDataByURL\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={event:p.default.DC_REQUEST,url:e,urgent:t};this.downloading=!0,this.sendJson(n),t&&(this.requestTimeout=window.setTimeout(this._loadtimeout.bind(this),1e3*this.config.dcRequestTimeout))}},{key:\"requestDataBySN\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={event:p.default.DC_REQUEST,sn:e,urgent:t};this.downloading=!0,this.sendJson(n),t&&(this.requestTimeout=window.setTimeout(this._loadtimeout.bind(this),1e3*this.config.dcRequestTimeout))}},{key:\"close\",value:function(){this.destroy()}},{key:\"receiveSignal\",value:function(e){this._datachannel.signal(e)}},{key:\"destroy\",value:function(){window.clearInterval(this.adjustSRInterval),window.clearInterval(this.pinger),this._datachannel.removeAllListeners(),this.removeAllListeners(),this._datachannel.destroy()}},{key:\"_handleRequestMsg\",value:function(e){this.rcvdReqQueue.length>0?e.urgent?this.rcvdReqQueue.push(e.sn):this.rcvdReqQueue.unshift(e.sn):this.emit(p.default.DC_REQUEST,e)}},{key:\"_handlePieceAck\",value:function(){if(this.uploading=!1,window.clearTimeout(this.uploadTimeout),this.uploadTimeout=null,this.rcvdReqQueue.length>0){var e=this.rcvdReqQueue.pop();this.emit(p.default.DC_REQUEST,{sn:e})}}},{key:\"_prepareForBinary\",value:function(e,t,n,r){this.bufArr=[],this.remainAttachments=e,this.bufUrl=t,this.bufSN=n,this.expectedSize=r}},{key:\"_handleBinaryData\",value:function(){var e=g.concat(this.bufArr);e.byteLength==this.expectedSize&&this.emit(p.default.DC_RESPONSE,{url:this.bufUrl,sn:this.bufSN,data:e}),this.bufUrl=\"\",this.bufArr=[],this.expectedSize=-1,this.downloading=!1}},{key:\"_handleGrant\",value:function(e){e.TTL>0&&this.emit(p.default.DC_GRANT,e)}},{key:\"_adjustStreamingRate\",value:function(e){var t=this,n=0;return this.adjustSRInterval=window.setInterval(function(){t.streamingRate=Math.round(8*n/e),n=0},1e3*e),function(e){n+=e}}},{key:\"_loadtimeout\",value:function(){var e=this.engine.logger;if(e.warn(\"datachannel timeout while downloading from \"+this.remotePeerId),this.emit(p.default.DC_TIMEOUT),this.requestTimeout=null,this.downloading=!1,++this.miss>=this.config.dcTolerance){var t={event:p.default.DC_CLOSE};this.sendJson(t),e.warn(\"datachannel download miss reach dcTolerance, close \"+this.remotePeerId),this.emit(p.default.DC_ERROR)}}},{key:\"_uploadtimeout\",value:function(){this.engine.logger.warn(\"datachannel timeout while uploading to \"+this.remotePeerId),this.uploading=!1,this.rcvdReqQueue=[]}},{key:\"_sendPing\",value:function(){var e=this;this.ping=performance.now();for(var t=0;t<this.config.dcPings;t++)this.sendJson({event:p.default.DC_PING});window.setTimeout(function(){if(e.delays.length>0){var t=0,n=!0,r=!1,i=void 0;try{for(var o,a=e.delays[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t+=o.value}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}e.delay=t/e.delays.length,e.delays=[]}},100)}},{key:\"_handlePongMsg\",value:function(){var e=performance.now()-this.ping;this.delays.push(e)}},{key:\"setupStats\",value:function(){var e=this,t=this.engine.logger;setInterval(function(){e._datachannel.getStats(function(e,n){t.warn(\"reports: \"+JSON.stringify(n,null,1))})},1e4)}}]),t}(h.default);t.default=y,e.exports=t.default},function(e,t,n){\"use strict\";(function(t){function r(e){var t=this;if(!(t instanceof r))return new r(e);if(t._id=c(4).toString(\"hex\").slice(0,7),t._debug(\"new peer %o\",e),e=Object.assign({allowHalfOpen:!1},e),f.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||c(20).toString(\"hex\"):null,t._isChromium=\"undefined\"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||r.channelConfig,t.config=e.config||r.config,t.constraints=t._transformConstraints(e.constraints||r.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&\"object\"===o(e.wrtc)?e.wrtc:s(),!t._wrtc)throw\"undefined\"==typeof window?new Error(\"No WebRTC support: Specify `opts.wrtc` option in this environment\"):new Error(\"No WebRTC support: Not a supported browser\");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc=\"number\"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};\"addTrack\"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once(\"finish\",t._onFinishBound)}function i(){}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};e.exports=r;var a=n(23)(\"simple-channel\"),s=n(10),u=n(2),c=n(26),f=n(27);u(r,f.Duplex),r.WEBRTC_SUPPORT=!!s(),r.config={iceServers:[{urls:\"stun:stun.l.google.com:19302\"},{urls:\"stun:global.stun.twilio.com:3478?transport=udp\"}]},r.constraints={},r.channelConfig={},Object.defineProperty(r.prototype,\"bufferSize\",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),r.prototype.address=function(){var e=this;return{port:e.localPort,family:\"IPv4\",address:e.localAddress}},r.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error(\"cannot signal after peer is destroyed\");if(\"string\"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug(\"signal()\"),e.candidate&&(t._pc.remoteDescription&&t._pc.remoteDescription.type?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],\"offer\"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t.destroy(e)}),e.sdp||e.candidate||t.destroy(new Error(\"signal() called with invalid signal data\"))},r.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),i,function(e){t.destroy(e)})}catch(e){t.destroy(new Error(\"error adding candidate: \"+e.message))}},r.prototype.send=function(e){this._channel.send(e)},r.prototype.destroy=function(e){this._destroy(e,function(){})},r.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(n._debug(\"destroy (error: %s)\",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._previousStreams=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._interval=null,n._reconnectTimeout=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener(\"finish\",n._onFinishBound),n._onFinishBound=null,n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,\"addTrack\"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}n._pc=null,n._channel=null,e&&n.emit(\"error\",e),n.emit(\"close\"),t()}},r.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(new Error(\"Data channel event is missing `channel` property\"));t._channel=e.channel,t._channel.binaryType=\"arraybuffer\",\"number\"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(e)}},r.prototype._read=function(){},r.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error(\"cannot write after peer is destroyed\"));if(r.connected){try{r.send(e)}catch(e){return r.destroy(e)}r._channel.bufferedAmount>65536?(r._debug(\"start backpressure: bufferedAmount %d\",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug(\"write before connect\"),r._chunk=e,r._cb=n},r.prototype._onFinish=function(){function e(){setTimeout(function(){t.destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once(\"connect\",e))},r.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){e.destroyed||(e.trickle||e._iceComplete?i():e.once(\"_iceComplete\",i))}function r(t){e.destroy(t)}function i(){var n=e._pc.localDescription||t;e._debug(\"signal\"),e.emit(\"signal\",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,n,r))},function(t){e.destroy(t)},e.offerConstraints)},r.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){e.destroyed||(e.trickle||e._iceComplete?i():e.once(\"_iceComplete\",i))}function r(t){e.destroy(t)}function i(){var n=e._pc.localDescription||t;e._debug(\"signal\"),e.emit(\"signal\",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,n,r))},function(t){e.destroy(t)},e.answerConstraints)},r.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug(\"iceStateChange (connection: %s) (gathering: %s)\",t,n),e.emit(\"iceStateChange\",t,n),\"connected\"!==t&&\"completed\"!==t||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),\"disconnected\"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e.destroy()},e.reconnectTimer)):e.destroy()),\"failed\"===t&&e.destroy(new Error(\"Ice connection failed.\")),\"closed\"===t&&e.destroy()}},r.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._pc.getStats.length>0?t._pc.getStats(function(n){if(!t.destroyed){var r=[];n.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,r.push(t)}),e(null,r)}},function(t){e(t)}):e(null,[])},r.prototype._maybeReady=function(){function e(){t.destroyed||t.getStats(function(n,r){function i(e){u=!0;var n=a[e.localCandidateId];n&&n.ip?(t.localAddress=n.ip,t.localPort=Number(n.port)):n&&n.ipAddress?(t.localAddress=n.ipAddress,t.localPort=Number(n.portNumber)):\"string\"==typeof e.googLocalAddress&&(n=e.googLocalAddress.split(\":\"),t.localAddress=n[0],t.localPort=Number(n[1]));var r=o[e.remoteCandidateId];r&&r.ip?(t.remoteAddress=r.ip,t.remotePort=Number(r.port)):r&&r.ipAddress?(t.remoteAddress=r.ipAddress,t.remotePort=Number(r.portNumber)):\"string\"==typeof e.googRemoteAddress&&(r=e.googRemoteAddress.split(\":\"),t.remoteAddress=r[0],t.remotePort=Number(r[1])),t.remoteFamily=\"IPv4\",t._debug(\"connect local: %s:%s remote: %s:%s\",t.localAddress,t.localPort,t.remoteAddress,t.remotePort)}if(!t.destroyed){n&&(r=[]);var o={},a={},s={},u=!1;if(r.forEach(function(e){\"remotecandidate\"!==e.type&&\"remote-candidate\"!==e.type||(o[e.id]=e),\"localcandidate\"!==e.type&&\"local-candidate\"!==e.type||(a[e.id]=e),\"candidatepair\"!==e.type&&\"candidate-pair\"!==e.type||(s[e.id]=e)}),r.forEach(function(e){\"transport\"===e.type&&i(s[e.selectedCandidatePairId]),(\"googCandidatePair\"===e.type&&\"true\"===e.googActiveConnection||(\"candidatepair\"===e.type||\"candidate-pair\"===e.type)&&e.selected)&&i(e)}),!(u||Object.keys(s).length&&!Object.keys(a).length))return void setTimeout(e,100);if(t._connecting=!1,t.connected=!0,t._chunk){try{t.send(t._chunk)}catch(n){return t.destroy(n)}t._chunk=null,t._debug('sent chunk from \"write before connect\"');var c=t._cb;t._cb=null,c(null)}\"number\"!=typeof t._channel.bufferedAmountLowThreshold&&(t._interval=setInterval(function(){t._onInterval()},150),t._interval.unref&&t._interval.unref()),t._debug(\"connect\"),t.emit(\"connect\")}})}var t=this;t._debug(\"maybeReady pc %s channel %s\",t._pcReady,t._channelReady),!t.connected&&!t._connecting&&t._pcReady&&t._channelReady&&(t._connecting=!0,e())},r.prototype._onInterval=function(){var e=this;!e._cb||!e._channel||e._channel.bufferedAmount>65536||e._onChannelBufferedAmountLow()},r.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug(\"signalingStateChange %s\",e._pc.signalingState),e.emit(\"signalingStateChange\",e._pc.signalingState))},r.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit(\"signal\",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit(\"_iceComplete\")))},r.prototype._onChannelMessage=function(e){var n=this;if(!n.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=t.from(r)),n.push(r)}},r.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug(\"ending backpressure: bufferedAmount %d\",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},r.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug(\"on channel open\"),e._channelReady=!0,e._maybeReady())},r.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug(\"on channel close\"),e.destroy())},r.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug(\"on add stream\"),t.emit(\"stream\",e.stream))},r.prototype._onTrack=function(e){var t=this;if(!t.destroyed){t._debug(\"on track\");var n=e.streams[0].id;-1===t._previousStreams.indexOf(n)&&(t._previousStreams.push(n),t.emit(\"stream\",e.streams[0]))}},r.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]=\"[\"+e._id+\"] \"+t[0],a.apply(null,t)},r.prototype._transformConstraints=function(e){var t=this;if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!t._isChromium){var n=Object.assign({},e.optional,e.mandatory);return void 0!==n.OfferToReceiveVideo&&(n.offerToReceiveVideo=n.OfferToReceiveVideo,delete n.OfferToReceiveVideo),void 0!==n.OfferToReceiveAudio&&(n.offerToReceiveAudio=n.OfferToReceiveAudio,delete n.OfferToReceiveAudio),n}return e.mandatory||e.optional||!t._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})}}).call(t,n(4).Buffer)},function(e,t,n){\"use strict\";function r(e){var t=e.length;if(t%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var n=e.indexOf(\"=\");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new h(o(e,i,a)),u=0,c=a>0?i-4:i,f=0;f<c;f+=4)t=l[e.charCodeAt(f)]<<18|l[e.charCodeAt(f+1)]<<12|l[e.charCodeAt(f+2)]<<6|l[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===a&&(t=l[e.charCodeAt(f)]<<2|l[e.charCodeAt(f+1)]>>4,s[u++]=255&t),1===a&&(t=l[e.charCodeAt(f)]<<10|l[e.charCodeAt(f+1)]<<4|l[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join(\"\")}function c(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(u(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(f[t>>2]+f[t<<4&63]+\"==\")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+\"=\")),i.join(\"\")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=c;for(var f=[],l=[],h=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,d=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",p=0,g=d.length;p<g;++p)f[p]=d[p],l[d.charCodeAt(p)]=p;l[\"-\".charCodeAt(0)]=62,l[\"_\".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*g}},function(e,t,n){(function(r){function i(){return!(\"undefined\"==typeof window||!window.process||\"renderer\"!==window.process.type)||(\"undefined\"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))&&(\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/))}function o(e){var n=this.useColors;if(e[0]=(n?\"%c\":\"\")+this.namespace+(n?\" %c\":\" \")+e[0]+(n?\"%c \":\" \")+\"+\"+t.humanize(this.diff),n){var r=\"color: \"+this.color;e.splice(1,0,r,\"color: inherit\");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){\"%%\"!==e&&(i++,\"%c\"===e&&(o=i))}),e.splice(o,0,r)}}function a(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem(\"debug\"):t.storage.debug=e}catch(e){}}function u(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&\"env\"in r&&(e=r.env.DEBUG),e}t=e.exports=n(24),t.log=a,t.formatArgs=o,t.save=s,t.load=u,t.useColors=i,t.storage=\"undefined\"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}},t.enable(u())}).call(t,n(1))},function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function i(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),\"string\"!=typeof a[0]&&a.unshift(\"%O\");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if(\"%%\"===n)return n;u++;var i=t.formatters[r];if(\"function\"==typeof i){var o=a[u];n=i.call(e,o),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a);(n.log||t.log||console.log.bind(console)).apply(e,a)}}var i;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),n.destroy=o,\"function\"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function a(e){t.save(e),t.names=[],t.skips=[];var n,r=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&(e=r[n].replace(/\\*/g,\".*?\"),\"-\"===e[0]?t.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):t.names.push(new RegExp(\"^\"+e+\"$\")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}}function s(){t.enable(\"\")}function u(e){if(\"*\"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i.default=i,t.coerce=c,t.disable=s,t.enable=a,t.enabled=u,t.humanize=n(25),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return n*f;case\"days\":case\"day\":case\"d\":return n*c;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return n*u;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return n*s;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return n*a;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return n;default:return}}}}function r(e){return e>=c?Math.round(e/c)+\"d\":e>=u?Math.round(e/u)+\"h\":e>=s?Math.round(e/s)+\"m\":e>=a?Math.round(e/a)+\"s\":e+\"ms\"}function i(e){return o(e,c,\"day\")||o(e,u,\"hour\")||o(e,s,\"minute\")||o(e,a,\"second\")||e+\" ms\"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+\" \"+n:Math.ceil(e/t)+\" \"+n+\"s\"}var a=1e3,s=60*a,u=60*s,c=24*u,f=365.25*c;e.exports=function(e,t){t=t||{};var o=typeof e;if(\"string\"===o&&e.length>0)return n(e);if(\"number\"===o&&!1===isNaN(e))return t.long?i(e):r(e);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(e))}},function(e,t,n){\"use strict\";(function(t,r){function i(){throw new Error(\"Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11\")}function o(e,n){if(e>65536)throw new Error(\"requested too many random bytes\");var i=new t.Uint8Array(e);e>0&&s.getRandomValues(i);var o=a.from(i.buffer);return\"function\"==typeof n?r.nextTick(function(){n(null,o)}):o}var a=n(5).Buffer,s=t.crypto||t.msCrypto;s&&s.getRandomValues?e.exports=o:e.exports=i}).call(t,n(0),n(1))},function(e,t,n){t=e.exports=n(11),t.Stream=t,t.Readable=t,t.Writable=n(14),t.Duplex=n(3),t.Transform=n(16),t.PassThrough=n(34)},function(e,t){},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t,n){e.copy(t,n)}var o=n(5).Buffer,a=n(30);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return\"\";for(var t=this.head,n=\"\"+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+\" \"+e})},function(e,t){},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||\"undefined\"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(32),t.setImmediate=\"undefined\"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=\"undefined\"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){\"use strict\";function r(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,s(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(f)setTimeout(a,0,e);else{var t=c[e];if(t){f=!0;try{o(t)}finally{i(e),f=!1}}}}if(!e.setImmediate){var s,u=1,c={},f=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,\"[object process]\"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=n,t}}()?function(){var t=\"setImmediate$\"+Math.random()+\"$\",n=function(n){n.source===e&&\"string\"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener(\"message\",n,!1):e.attachEvent(\"onmessage\",n),s=function(n){e.postMessage(t+n,\"*\")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():l&&\"onreadystatechange\"in l.createElement(\"script\")?function(){var e=l.documentElement;s=function(t){var n=l.createElement(\"script\");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),h.setImmediate=r,h.clearImmediate=i}}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(1))},function(e,t,n){(function(t){function n(e,t){function n(){if(!i){if(r(\"throwDeprecation\"))throw new Error(t);r(\"traceDeprecation\")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r(\"noDeprecation\"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&\"true\"===String(n).toLowerCase()}e.exports=n}).call(t,n(0))},function(e,t,n){\"use strict\";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(16),o=n(6);o.inherits=n(2),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o,a){r(this,e),this.engine=t,this.browserInfo=a;var s=\"?key=\"+window.encodeURIComponent(n)+\"&info_hash=\"+i;this.announceURL=o+\"/announce/\"+s+\"&browser=\"+a.browser+\"&device=\"+a.device,this.heartbeatURL=o+\"/heartbeat/\"+s,this.getPeersURL=o+\"/get_peers/\"+s,this.statsURL=o+\"/stats/\"+s,this.limit=10240,this.conns=0,this.failConns=0,this.totalHTTPDownloaded=0,this.totalP2PDownloaded=0,this.httpDownloaded=0,this.p2pDownloaded=0,this.errsFragLoad=0,this.errsBufStalled=0,this.errsInternalExpt=0}return i(e,[{key:\"btAnnounce\",value:function(){var e=this,t=this.engine.logger;return new Promise(function(n,r){fetch(e.announceURL).then(function(e){return e.json()}).then(function(t){e.peerId=t.peer_id,n(t)}).catch(function(e){t.error(\"[fetcher] btAnnounce error \"+e),r(e)})})}},{key:\"btHeartbeat\",value:function(e){var t=this,n=this.engine.logger;this.heartbeater=window.setInterval(function(){fetch(t.heartbeatURL+\"&peer_id=\"+t.peerId).then(function(e){}).catch(function(e){window.clearInterval(t.heartbeater),n.error(\"[fetcher] btHeartbeat error \"+e)})},1e3*e)}},{key:\"btGetPeers\",value:function(){var e=this,t=this.engine.logger;return new Promise(function(n,r){fetch(e.getPeersURL+\"&peer_id=\"+e.peerId).then(function(e){return e.json()}).then(function(e){n(e)}).catch(function(e){t.error(\"[fetcher] btGetPeers error \"+e),r(e)})})}},{key:\"increConns\",value:function(){this.conns++}},{key:\"decreConns\",value:function(){this.conns--}},{key:\"increFailConns\",value:function(){this.failConns++}},{key:\"btStatsStart\",value:function(e){this.limit=1024*e}},{key:\"reportFlow\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Math.round(e.total/1024);t?(this.p2pDownloaded+=n,this.totalP2PDownloaded+=n,this.engine.emit(\"stats\",{totalP2PDownloaded:this.totalP2PDownloaded})):(this.httpDownloaded+=n,this.totalHTTPDownloaded+=n,this.engine.emit(\"stats\",{totalHTTPDownloaded:this.totalHTTPDownloaded})),this._checkFlowLimit()}},{key:\"destroy\",value:function(){window.clearInterval(this.heartbeater)}},{key:\"_checkFlowLimit\",value:function(){var e=this,t=this.engine.logger;if(this.p2pDownloaded>=this.limit||this.httpDownloaded>=this.limit){var n={source:Math.round(this.httpDownloaded),p2p:Math.round(this.p2pDownloaded)};0!==this.conns&&(n.conns=this.conns),this.failConns>0&&(n.failConns=this.failConns),this.errsFragLoad>0&&(n.errsFragLoad=this.errsFragLoad),this.errsBufStalled>0&&(n.errsBufStalled=this.errsBufStalled),this.errsInternalExpt>0&&(n.errsInternalExpt=this.errsInternalExpt),t.info(\"reporting flow p2p \"+this.p2pDownloaded+\" http \"+this.httpDownloaded),fetch(this.statsURL+\"&peer_id=\"+this.peerId,{method:\"POST\",body:JSON.stringify(n)}).then(function(n){n.ok&&(t.info(\"sucessfully report flow\"),e.httpDownloaded=0,e.p2pDownloaded=0,e.conns=0,e.failConns=0,e.errsFragLoad=0,e.errsBufStalled=0,e.errsInternalExpt=0)}).catch(function(e){t.error(\"[fetcher] stats upload error \"+e)})}}}]),e}();t.default=o,e.exports=t.default}])});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_cdnbye-core@0.0.5@cdnbye-core/dist/cdnbye-core.js\n// module id = 8\n// module chunks = 0","/**\n * Created by xieting on 2018/3/23.\n */\n\nimport EventEmitter from 'events';\nimport ReconnectingWebSocket from 'reconnecting-websocket';\n\n\nclass SignalClient extends EventEmitter{\n    constructor(engine, peerId, config) {\n        super();\n        this.engine = engine;\n        this.peerId = peerId;\n        this.config = config;\n        this.connected = false;\n        this._ws = this._init(peerId);\n    }\n\n    _init(id) {\n        const { logger } = this.engine;\n        const wsOptions = {\n            maxRetries: this.config.wsMaxRetries,\n            minReconnectionDelay: this.config.wsReconnectInterval*1000\n        };\n        let queryStr = `?id=${id}`;\n        let websocket = new ReconnectingWebSocket(this.config.wsSignalerAddr+queryStr, undefined, wsOptions);\n        websocket.onopen = () => {\n            logger.info('Signaler websocket connection opened');\n\n            this.connected = true;\n            if (this.onopen) this.onopen();\n        };\n\n        websocket.push = websocket.send;\n        websocket.send = msg => {\n            let msgStr = JSON.stringify(Object.assign({peer_id: id}, msg));\n            websocket.push(msgStr);\n        };\n        websocket.onmessage = (e) => {\n\n            if (this.onmessage) this.onmessage(e)\n        };\n        websocket.onclose = () => {                                            //websocketdatachannel\n            logger.warn(`Signaler websocket closed`);\n            if (this.onclose) this.onclose();\n            this.connected = false;\n        };\n        return websocket;\n    }\n\n    sendSignal(remotePeerId, data) {\n        let msg = {\n            action: 'signal',\n            peer_id: this.peerId,\n            to_peer_id: remotePeerId,\n            data: data\n        };\n        this.send(msg);\n    }\n\n    send(msg) {\n        this._ws.send(msg);\n    }\n\n    close() {\n        this._ws.close();\n        this._ws = null;\n    }\n}\n\nexport default SignalClient;\n\n\n// WEBPACK FOOTER //\n// ./src/signal-client.js","/**\n * Created by xieting on 2018/3/23.\n */\n\nimport EventEmitter from 'events';\n\n\nclass FragLoader extends EventEmitter {\n    constructor(config) {\n        super();\n\n        this.logger = config.logger;\n        //denoted by sn\n        this.currLoaded = config.currLoaded;\n        this.currLoadedDuration = config.currLoadedDuration;              //\n        this.currPlay = config.currPlay;\n\n        this.bufMgr = config.bufMgr;\n        this.xhrLoader = new config.loader(config);\n        this.p2pEnabled = config.p2pEnabled;\n        this.scheduler = config.scheduler;\n        this.fetcher = config.fetcher;\n    }\n\n    destroy() {\n        this.abort();\n    }\n\n    abort() {\n        this.xhrLoader.abort();\n    }\n\n    /*\n     seghttp\n     */\n    load(context, config, callbacks) {\n        const { logger } = this;\n        const frag = context.frag;\n        frag.loadByP2P = false;                //flag\n        frag.loadByHTTP = false;\n        if (this.bufMgr.hasSegOfURL(frag.relurl)) {                                     //\n            logger.debug(`bufMgr found seg sn ${frag.sn} url ${frag.relurl}`);\n            let seg = this.bufMgr.getSegByURL(frag.relurl);\n            let response = { url : context.url, data : seg.data }, trequest, tfirst, tload, loaded, total;\n            trequest = performance.now();\n            tfirst = tload = trequest + 50;\n            loaded = total = frag.loaded = seg.size;\n            let stats={ trequest, tfirst, tload, loaded, total, retry: 0 };\n            frag.loadByP2P = true;\n            window.setTimeout(() => {                                                   //\n                this.fetcher.reportFlow(stats, true);\n                callbacks.onSuccess(response, stats, context);\n            }, 50)\n        } else if (this.scheduler.peersHasSN(frag.sn)) {                             //peersbitmap\n            logger.info(`found sn ${frag.sn} from peers`);\n            context.frag.loadByP2P = true;\n            this.scheduler.load(context, config, callbacks);\n            callbacks.onTimeout = (stats, context) => {                             //P2Pxhr\n                logger.debug(`xhrLoader load ${frag.relurl} at ${frag.sn}`);\n                frag.loadByP2P = false;\n                frag.loadByHTTP = true;\n                this.xhrLoader.load(context, config, callbacks);\n            };\n            const onSuccess = callbacks.onSuccess;\n            callbacks.onSuccess = (response, stats, context) => {                       //onsucess\n                if (!this.bufMgr.hasSegOfURL(frag.relurl)) {\n                    this.bufMgr.copyAndAddBuffer(response.data, frag.relurl, frag.sn);\n                }\n                this.fetcher.reportFlow(stats, true);\n                frag.loaded = stats.loaded;\n                onSuccess(response,stats,context);\n            };\n        } else {\n            logger.debug(`xhrLoader load ${frag.relurl} at ${frag.sn}`);\n            context.frag.loadByHTTP = true;\n            this.xhrLoader.load(context, config, callbacks);\n            const onSuccess = callbacks.onSuccess;\n            callbacks.onSuccess = (response, stats, context) => {                       //onsucess\n                if (!this.bufMgr.hasSegOfURL(frag.relurl)) {\n                    this.bufMgr.copyAndAddBuffer(response.data, frag.relurl, frag.sn);\n                }\n                this.fetcher.reportFlow(stats, false);\n                onSuccess(response,stats,context);\n            };\n        }\n    }\n\n\n}\n\n\nexport default FragLoader;\n\n\n// WEBPACK FOOTER //\n// ./src/bittorrent/bt-loader.js","/**\n * Created by xieting on 2018/1/9.\n */\n\nimport EventEmitter from 'events';\nimport {Events, Buffer} from './cdnbye-core';\n\n\nclass BufferManager extends EventEmitter {\n    constructor(engine, config) {\n        super();\n\n        this.engine = engine;\n        this.config = config;\n        /* segment\n        sn: number\n        relurl: string\n        data: Buffer\n        size: string\n         */\n        this._segPool = new Map();             //segMap            relurl -> segment\n        this._currBufSize = 0;                 //buffer\n        this.sn2Url = new Map();               //snrelurl      sn -> relurl\n        this.overflowed = false;               //\n    }\n\n    get currBufSize() {\n        return this._currBufSize;\n    }\n\n    hasSegOfURL(url) {                                                     //seg\n        return this._segPool.has(url);\n    }\n\n    copyAndAddBuffer(data, url, sn) {                                       //\n        let payloadBuf = Buffer.from(data);\n        let byteLength = payloadBuf.byteLength;\n        let targetBuffer = new Buffer(byteLength);\n        payloadBuf.copy(targetBuffer);\n\n        let segment = {\n            sn: sn,\n            relurl: url,\n            data: targetBuffer,\n            size: byteLength\n        };\n\n        this.addSeg(segment);\n        this.sn2Url.set(sn, url);\n    }\n\n    addBuffer(sn, url, buf) {                                             //\n        let segment = {\n            sn: sn,\n            relurl: url,\n            data: buf,\n            size: buf.byteLength\n        };\n        this.addSeg(segment);\n        this.sn2Url.set(sn, url);\n    }\n\n    addSeg(seg) {\n        const { logger } = this.engine;\n        this._segPool.set(seg.relurl, seg);\n        // this.urlSet.add(seg.relurl);\n        this._currBufSize += parseInt(seg.size);\n        // logger.debug(`seg.size ${seg.size} _currBufSize ${this._currBufSize} maxBufSize ${this.config.maxBufSize}`);\n        while (this._currBufSize > this.config.maxBufSize) {                       //\n            const lastSeg =[...this._segPool.values()].shift();\n            logger.info(`pop seg ${lastSeg.relurl} at ${lastSeg.sn}`);\n            this._segPool.delete(lastSeg.relurl);\n            this.sn2Url.delete(lastSeg.sn);\n            this._currBufSize -= parseInt(lastSeg.size);\n            if (!this.overflowed) this.overflowed = true;\n            this.emit(Events.BM_LOST, lastSeg.sn);\n        }\n    }\n\n    getSegByURL(relurl) {\n        return this._segPool.get(relurl);\n    }\n\n    getURLbySN(sn) {\n        return this.sn2Url.get(sn);\n    }\n\n    clear() {\n        this._segPool.clear();\n        this.sn2Url.clear();\n        this._currBufSize = 0;\n    }\n}\n\nexport default BufferManager;\n\n\n// WEBPACK FOOTER //\n// ./src/buffer-manager.js","/**\n * UAParser.js v0.7.17\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright  2012-2016 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.17',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            var margedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    margedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    margedRegexes[i] = regexes[i];\n                }\n            }\n            return margedRegexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined;\n        },\n        trim : function (str) {\n          return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function (ua, arrays) {\n\n            //var result = {},\n            var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n            /*// construct object barebones\n            for (p = 0; p < args[1].length; p++) {\n                q = args[1][p];\n                result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n            }*/\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            // console.log(this);\n            //return this;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n            ], [NAME, VERSION], [\n\n            /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [\n\n            /((?:[\\s\\/])uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i\n                                                                                // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [\n\n            /(QQ)\\/([\\d\\.]+)/i                                                  // QQ, aka ShouQ\n            ], [NAME, VERSION], [\n\n            /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n            ], [NAME, VERSION], [\n\n            /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)|\\s)/i                                 // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [\n\n            /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n            /((?:oculus|samsung)browser)\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+(?:g|us))(.+)/, '$1 $2'], VERSION], [                // Oculus / Samsung Browser\n\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [\n\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(gsa)\\/([\\w\\.]+).+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i  // Google Search Appliance on iOS\n            ], [[NAME, 'GSA'], VERSION], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(hp).+(tablet)/i,                                                  // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /android.+\\s([c-g]\\d{4}|so[-l]\\w+)\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /d\\/huawei([\\w\\s-]+)[;\\)]/i,\n            /(nexus\\s6p)/i                                                      // Huawei\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n            /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i,\n            /(nexus\\s6)/i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /smart-tv.+(samsung)/i\n            ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android.+([vl]k\\-?\\d{3})\\s+build/i                                 // LG Tablet\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i,\n            /android.+lg(\\-?[\\d\\w]+)\\s+build/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+;\\s(pixel c)\\s/i                                          // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n            /android.+;\\s(pixel xl|pixel)\\s/i                                   // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                    // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d\\w)?)\\s+build/i,    // Xiaomi Mi\n            /android.+(redmi[\\s\\-_]*(?:note)?(?:[\\s_]*[\\w\\s]+)?)\\s+build/i      // Redmi Phones\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n            /android.+(mi[\\s\\-_]*(?:pad)?(?:[\\s_]*[\\w\\s]+)?)\\s+build/i          // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [\n            /android.+;\\s(m[1-5]\\snote)\\sbuild/i                                // Meizu Tablet\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, TABLET]], [\n\n            /android.+a000(1)\\s+build/i                                         // OnePlus\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            /android.+[;\\/]\\s*(RCT[\\d\\w]+)\\s+build/i                            // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Venue[\\d\\s]*)\\s+build/i                          // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Q[T|M][\\d\\w]+)\\s+build/i                         // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s+(Barnes[&\\s]+Noble\\s+|BN[RT])(V?.*)\\s+build/i     // Barnes & Noble Tablet\n            ], [[VENDOR, 'Barnes & Noble'], MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s+(TM\\d{3}.*\\b)\\s+build/i                           // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(zte)?.+(k\\d{2})\\s+build/i                        // ZTE K Series Tablet\n            ], [[VENDOR, 'ZTE'], MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(gen\\d{3})\\s+build.*49h/i                         // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n\n            /android.+[;\\/]\\s*(zur\\d{3})\\s+build/i                              // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*((Zeki)?TB.*\\b)\\s+build/i                         // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n\n            /(android).+[;\\/]\\s+([YR]\\d{2}x?.*)\\s+build/i,\n            /android.+[;\\/]\\s+(Dragon[\\-\\s]+Touch\\s+|DT)(.+)\\s+build/i          // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(NS-?.+)\\s+build/i                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*((NX|Next)-?.+)\\s+build/i                         // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Xtreme\\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\\s+build/i\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [                    // Voice Xtreme Phones\n\n            /android.+[;\\/]\\s*(LVTEL\\-?)?(V1[12])\\s+build/i                     // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n\n            /android.+[;\\/]\\s*(V(100MD|700NA|7011|917G).*\\b)\\s+build/i          // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Le[\\s\\-]+Pan)[\\s\\-]+(.*\\b)\\s+build/i             // Le Pan Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Trio[\\s\\-]*.*)\\s+build/i                         // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*(Trinity)[\\-\\s]*(T\\d{3})\\s+build/i                // Trinity Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /android.+[;\\/]\\s*TU_(1491)\\s+build/i                               // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n\n            /android.+(KS(.+))\\s+build/i                                        // Amazon Kindle Tablets\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n\n            /android.+(Gigaset)[\\s\\-]+(Q.+)\\s+build/i                           // Gigaset Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /\\s(tablet|tab)[;\\/]/i,                                             // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL], [\n\n            /(android.+)[;\\/].+build/i                                          // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n\n\n        /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s]+\\w)*/i,                  // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(haiku)\\s(\\w+)/i                                                  // Haiku\n            ], [NAME, VERSION],[\n\n            /cfnetwork\\/.+darwin/i,\n            /ip[honead]+(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i                 // iOS\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n    /*\n    var Browser = function (name, version) {\n        this[NAME] = name;\n        this[VERSION] = version;\n    };\n    var CPU = function (arch) {\n        this[ARCHITECTURE] = arch;\n    };\n    var Device = function (vendor, model, type) {\n        this[VENDOR] = vendor;\n        this[MODEL] = model;\n        this[TYPE] = type;\n    };\n    var Engine = Browser;\n    var OS = Browser;\n    */\n    var UAParser = function (uastring, extensions) {\n\n        if (typeof uastring === 'object') {\n            extensions = uastring;\n            uastring = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n        //var browser = new Browser();\n        //var cpu = new CPU();\n        //var device = new Device();\n        //var engine = new Engine();\n        //var os = new OS();\n\n        this.getBrowser = function () {\n            var browser = { name: undefined, version: undefined };\n            mapper.rgx.call(browser, ua, rgxmap.browser);\n            browser.major = util.major(browser.version); // deprecated\n            return browser;\n        };\n        this.getCPU = function () {\n            var cpu = { architecture: undefined };\n            mapper.rgx.call(cpu, ua, rgxmap.cpu);\n            return cpu;\n        };\n        this.getDevice = function () {\n            var device = { vendor: undefined, model: undefined, type: undefined };\n            mapper.rgx.call(device, ua, rgxmap.device);\n            return device;\n        };\n        this.getEngine = function () {\n            var engine = { name: undefined, version: undefined };\n            mapper.rgx.call(engine, ua, rgxmap.engine);\n            return engine;\n        };\n        this.getOS = function () {\n            var os = { name: undefined, version: undefined };\n            mapper.rgx.call(os, ua, rgxmap.os);\n            return os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            //browser = new Browser();\n            //cpu = new CPU();\n            //device = new Device();\n            //engine = new Engine();\n            //os = new OS();\n            return this;\n        };\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    //UAParser.Utils = util;\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        // TODO: test!!!!!!!!\n        /*\n        if (require && require.main === module && process) {\n            // cli\n            var jsonize = function (arr) {\n                var res = [];\n                for (var i in arr) {\n                    res.push(new UAParser(arr[i]).getResult());\n                }\n                process.stdout.write(JSON.stringify(res, null, 2) + '\\n');\n            };\n            if (process.stdin.isTTY) {\n                // via args\n                jsonize(process.argv.slice(2));\n            } else {\n                // via pipe\n                var str = '';\n                process.stdin.on('readable', function() {\n                    var read = process.stdin.read();\n                    if (read !== null) {\n                        str += read;\n                    }\n                });\n                process.stdin.on('end', function () {\n                    jsonize(str.replace(/\\n$/, '').split('\\n'));\n                });\n            }\n        }\n        */\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (window) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window && (window.jQuery || window.Zepto);\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_ua-parser-js@0.7.17@ua-parser-js/src/ua-parser.js\n// module id = 12\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 13\n// module chunks = 0","/**\n * Created by xieting on 2018/4/16.\n */\nimport ReconnectingWebSocket from 'reconnecting-websocket';\n\nconst logTypes = {\n    debug: 0,\n    info: 1,\n    warn: 2,\n    error: 3,\n    none: 4,\n};\n\nconst typesP = ['_debugP', '_infoP', '_warnP', '_errorP'];\nconst typesU = ['_debugU', '_infoU', '_warnU', '_errorU'];\n\nclass Logger {\n    constructor(config, channel) {\n\n        this.config = config;\n        this.connected = false;\n        if (config.enableLogUpload) {\n            try {\n                this._ws = this._initWs(channel);\n            } catch (e) {\n                this._ws = null;\n            }\n        }\n        if (!(config.logLevel in logTypes)) config.logLevel = 'none';\n        if (!(config.logUploadLevel in logTypes)) config.logUploadLevel = 'none';\n        for (let i=0;i<logTypes[config.logLevel];i++) {\n            this[typesP[i]] = noop;\n        }\n        for (let i=0;i<logTypes[config.logUploadLevel];i++) {\n            this[typesU[i]] = noop;\n        }\n        this.identifier = '';\n    }\n\n    debug(msg) {\n        this._debugP(msg);\n        this._debugU(msg);\n    }\n\n    info(msg) {\n        this._infoP(msg);\n        this._infoU(msg);\n    }\n\n    warn(msg) {\n        this._warnP(msg);\n        this._warnU(msg);\n    }\n\n    error(msg) {\n        this._errorP(msg);\n        this._errorU(msg);\n    }\n\n    _debugP(msg) {\n        console.log(msg);\n    }\n\n    _infoP(msg) {\n        console.info(msg);\n    }\n\n    _warnP(msg) {\n        console.warn(msg);\n    }\n\n    _errorP(msg) {\n        console.error(msg);\n    }\n\n    _debugU(msg) {\n        msg = `[${this.identifier} debug] > ${msg}`\n        this._uploadLog(msg);\n    }\n\n    _infoU(msg) {\n        msg = `[${this.identifier} info] > ${msg}`\n        this._uploadLog(msg);\n    }\n\n    _warnU(msg) {\n        msg = `[${this.identifier} warn] > ${msg}`\n        this._uploadLog(msg);\n    }\n\n    _errorU(msg) {\n        msg = `[${this.identifier} error] > ${msg}`\n        this._uploadLog(msg);\n    }\n\n    _uploadLog(msg) {\n        if (!this.connected) return;\n        this._ws.send(msg);\n    }\n\n    _initWs(channel) {\n        const wsOptions = {\n            maxRetries: this.config.wsMaxRetries,\n            minReconnectionDelay: this.config.wsReconnectInterval*1000\n        };\n        let ws = new ReconnectingWebSocket(this.config.logUploadAddr+`?info_hash=${window.encodeURIComponent(channel)}`, undefined, wsOptions);\n        ws.onopen = () => {\n            this.debug('Log websocket connection opened');\n            this.connected = true;\n        };\n        // ws.onmessage = (e) => {\n        //\n        //\n        // };\n        ws.onclose = () => {                                            //websocketdatachannel\n            this.warn(`Log websocket closed`);\n            this.connected = false;\n        };\n        return ws;\n    }\n}\n\nfunction noop() {\n\n}\n\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/logger.js"],"sourceRoot":""}